<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Japan Azure Identity Support Blog</title>
  
  <subtitle>日本マイクロソフトの Azure Active Directory と AD FS に関するサポート情報のブログです。</subtitle>
  <link href="https://jpazureid.github.io/blog/atom.xml" rel="self"/>
  
  <link href="https://jpazureid.github.io/blog/"/>
  <updated>2022-05-21T10:28:09.489Z</updated>
  <id>https://jpazureid.github.io/blog/</id>
  
  <author>
    <name>Azure Identity Support Japan</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Azure AD の文字数や上限に関するよくある質問</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/azuread-user-group-limitation/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/azuread-user-group-limitation/</id>
    <published>2022-05-16T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.489Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure ID チームの小出です。</p><p>今回は、 Azure AD の設定やオブジェクト（ユーザーやグループ）に関する数や文字数の上限について、よくある質問をまとめてご案内します。  </p><h2 id="はじめに"><a href="#はじめに" class="headerlink" title="はじめに"></a>はじめに</h2><p>弊社サポートにお問い合わせいただくお客様には、自社もしくは顧客の Azure AD テナント管理者様や、サービスの導入プロジェクトなどに参加されている方が多いことと思います。  </p><p>新規に Azure AD の利用を検討されている場合、設計フェーズにおいて、ご利用予定のサービスおよび機能について仕様や動作を確認されていることと思います。<br>また、すでにサービスをご利用いただいている状況であっても、運用改善などの観点からほかの機能を利用したい、もしくは Azure AD Premium の機能を検討しているといった理由で、最大どれくらいのリソースを作成できるかや、指定できる文字数に制限があるかなどを事前に確認されたいことがあるかもしれません。  </p><p>こうした「上限数を教えてください」「制限はありますか？」といったお問い合わせを最近よくいただいております。<br>上限や文字数の制限などの記載は、各サービスや機能ごとに用意されておりますため、お客様側で公開情報の中から確認いただくのは難しいこともあるかと思います。<br>そこで今回は、Azure AD のユーザーやグループをはじめとするオブジェクトと、基本的な設定の上限値について、よくある質問をまとめて案内します。  </p><h2 id="公開情報"><a href="#公開情報" class="headerlink" title="公開情報"></a>公開情報</h2><p>基本的な上限や制限についての情報は、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/enterprise-users/directory-service-limits-restrictions">Azure AD サービスの制限と制約の公開情報</a> にて記載されていますので、併せてご確認ください。  </p><h2 id="上限についてお問い合わせいただく前に"><a href="#上限についてお問い合わせいただく前に" class="headerlink" title="上限についてお問い合わせいただく前に"></a>上限についてお問い合わせいただく前に</h2><p>よくご質問いただく上限や制限について下記に情報をまとめておりますが、これ以外の設定および属性について確認されたいシナリオも多くあるものと認識しております。<br>本記事に記載されていない情報について確認されたい場合は、以下を確認の上、弊社サポートへお問い合わせください。<br>お問い合わせ時に下記内容について言及がない場合は、担当のサポート エンジニアよりお客様に詳細をヒアリングさせていただきます。</p><ul><li>「グループを 10 万個つくりたい」もしくは「ユーザーを 20 万人作りたい」など、お客様側で想定している具体的な数字や利用シナリオをお問い合わせの際に併せて記載いただく。</li><li>具体的な数字の見積りが難しい場合、「40 万は超えなさそう」など、おおよそどの程度の規模を想定しているかを併せてお伝えいたいただく。</li></ul><p>なお、オブジェクトによっては、明示的に上限が設定されていないものや特段制限のないものもあります。<br>このような場合、弊社検証環境などで動作を確認したり、開発部門に確認したりすることがありますが、状況によっては調査に時間がかかる場合もありますのであらかじめご了承ください。</p><h2 id="オブジェクト-クォータ"><a href="#オブジェクト-クォータ" class="headerlink" title="オブジェクト クォータ"></a>オブジェクト クォータ</h2><p>Azure AD には、テナントに作成できるオブジェクト数に制限があります。この制限をディレクトリ クォータやオブジェクト クォータと呼んでいます。</p><p>このクォータには、「ユーザーが x 人まで、グループが x 個まで」といった個別の制限はないものの、Azure AD 上に登録されるオブジェクト全体 (ユーザー、グループ、デバイスや連絡先などのオブジェクトすべて) に対しては、既定では 5 万、カスタム ドメインの登録された環境では 30 万という制限があります。<br>この値に到達すると新しいオブジェクトが作成できなくなるため、個別に制限がない項目でも、テナント全体として上限があるような形となります。</p><p>クォータの概要と拡張方法については、<a href="https://jpazureid.github.io/blog/azure-active-directory/AzureAD-Quota-enhancements/?msclkid=61930279aa7511ec8665a6b82a07747a">Azure AD ディレクトリ クォータの拡張について</a> の記事で案内しております。併せてご確認ください。  </p><h2 id="ユーザー-オブジェクトに関する各種上限"><a href="#ユーザー-オブジェクトに関する各種上限" class="headerlink" title="ユーザー オブジェクトに関する各種上限"></a>ユーザー オブジェクトに関する各種上限</h2><h3 id="Q-Azure-AD-に作成できるユーザーの数に上限はありますか？"><a href="#Q-Azure-AD-に作成できるユーザーの数に上限はありますか？" class="headerlink" title="Q: Azure AD に作成できるユーザーの数に上限はありますか？"></a><span style="color: blue; ">Q: Azure AD に作成できるユーザーの数に上限はありますか？</span></h3><p><span style="color: red; ">A.</span> いいえ、作成できるユーザーの数に上限はありません。ただし、Azure AD に作成できるオブジェクト数である “オブジェクト クォータ” を超える数のユーザーは作成できません。</p><h3 id="Q-Azure-ポータルに-CSV-を読み込んで、一括でユーザーを作成したいです。制限はありますか？"><a href="#Q-Azure-ポータルに-CSV-を読み込んで、一括でユーザーを作成したいです。制限はありますか？" class="headerlink" title="Q. Azure ポータルに CSV を読み込んで、一括でユーザーを作成したいです。制限はありますか？"></a><span style="color: blue; ">Q. Azure ポータルに CSV を読み込んで、一括でユーザーを作成したいです。制限はありますか？</span></h3><p><span style="color: red; ">A.</span> はい、 CSV からのインポートは最大 1 時間ほどかかります。5 万ユーザー程度は作成可能ですが、それ以上を作成する際は、分割してアップロードするか PowerShell などをご利用いただくことをお勧めします。<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/enterprise-users/users-bulk-add#bulk-import-service-limits">Azure Active Directory でのユーザーの一括作成</a> の公開資料も併せてご参照ください。</p><blockquote><p>ユーザー作成の一括操作は、それぞれ最大 1 時間かかる場合があります。 これにより、最小で 5 万ユーザーを一括作成できます。</p></blockquote><h3 id="Q-Azure-AD-ユーザーに登録できる各種属性の文字数制限を教えてください。"><a href="#Q-Azure-AD-ユーザーに登録できる各種属性の文字数制限を教えてください。" class="headerlink" title="Q. Azure AD ユーザーに登録できる各種属性の文字数制限を教えてください。"></a><span style="color: blue; ">Q. Azure AD ユーザーに登録できる各種属性の文字数制限を教えてください。</span></h3><p><span style="color: red; ">A.</span> 下記の表を参考資料としてご利用ください。正式な公開情報に記載されていない属性のサイズは、変更される可能性がある点にご留意ください。</p><table><thead><tr><th>属性</th><th>型</th><th>文字数・値の制限事項</th></tr></thead><tbody><tr><td>city</td><td>String</td><td>128 文字</td></tr><tr><td>companyname</td><td>String</td><td>64 文字</td></tr><tr><td>country</td><td>String</td><td>128 文字</td></tr><tr><td>creationType</td><td>String</td><td>Read-Only (ゲストユーザーの場合 Invitation という値が入る)</td></tr><tr><td>department</td><td>String</td><td>64 文字</td></tr><tr><td>displayname</td><td>String</td><td>256 文字</td></tr><tr><td>employeeId</td><td>String</td><td>16 文字</td></tr><tr><td>externalUserState</td><td>String</td><td>Read-only (PendingAcceptance など招待の状態が入る)</td></tr><tr><td>faxNumber</td><td>String</td><td>64 文字</td></tr><tr><td>givenName</td><td>String</td><td>64 文字</td></tr><tr><td>id</td><td>String</td><td>123e4567-e89b-12d3-a456-426614174000 などの 16 進数の 32 文字 + 4 ハイフン の文字</td></tr><tr><td>imAddresses</td><td>String collection</td><td>Read-only</td></tr><tr><td>jobTitle</td><td>String</td><td>64 文字</td></tr><tr><td>mail</td><td>String</td><td>メールアドレスの長さが最大 256 文字。メール アドレスのユーザー名部分の長さが最大 64 文字</td></tr><tr><td>mailNickname</td><td>String</td><td>64 文字</td></tr><tr><td>mobilePhone</td><td>String</td><td>32 文字</td></tr><tr><td>officeLocation</td><td>String</td><td>128 文字</td></tr><tr><td>onPremisesDistinguishedName</td><td>String</td><td>Read-only で AADC からのみ設定可能</td></tr><tr><td>onPremisesDomainName</td><td>String</td><td>Read-only で AADC からのみ設定可能</td></tr><tr><td>onPremisesImmutableId</td><td>String</td><td>Read-only で AADC からのみ設定可能</td></tr><tr><td>onPremisesSecurityIdentifier</td><td>String</td><td>Read-only で AADC からのみ設定可能</td></tr><tr><td>otherMails</td><td>String</td><td>複数指定するメールアドレスのうち、個別のメールアドレスの長さが最大 256 文字</td></tr><tr><td>postalCode</td><td>String</td><td>40 文字</td></tr><tr><td>preferredLanguage</td><td>String</td><td>en-us や ja-jp など</td></tr><tr><td>state</td><td>String</td><td>128 文字</td></tr><tr><td>streetAddress</td><td>String</td><td>1024 文字</td></tr><tr><td>surname</td><td>String</td><td>64 文字</td></tr><tr><td>usageLocation</td><td>String</td><td>2 文字 (ISO 3166-1 alpha-2 (A2) two-letter country or region code)</td></tr><tr><td>userPrincipalName</td><td>String</td><td>64 文字</td></tr><tr><td>userType</td><td>String</td><td>Member or Guest のいずれかの値</td></tr></tbody></table><h3 id="Q-Azure-AD-ユーザーのパスワードの文字数制限を教えてください。"><a href="#Q-Azure-AD-ユーザーのパスワードの文字数制限を教えてください。" class="headerlink" title="Q. Azure AD ユーザーのパスワードの文字数制限を教えてください。"></a><span style="color: blue; ">Q. Azure AD ユーザーのパスワードの文字数制限を教えてください。</span></h3><p><span style="color: red; ">A.</span> クラウド ユーザーの場合、全テナント共通で、8 文字から 256 文字までとなります (現時点ではこのポリシーを変更することはできません。)</p><h3 id="Q-ユーザーに-Azure-ロール-RBAC-を割り当てたいです。カスタム-ロールを作りたいのですが、いくつまで作れますか。"><a href="#Q-ユーザーに-Azure-ロール-RBAC-を割り当てたいです。カスタム-ロールを作りたいのですが、いくつまで作れますか。" class="headerlink" title="Q. ユーザーに Azure ロール (RBAC) を割り当てたいです。カスタム ロールを作りたいのですが、いくつまで作れますか。"></a><span style="color: blue; ">Q. ユーザーに Azure ロール (RBAC) を割り当てたいです。カスタム ロールを作りたいのですが、いくつまで作れますか。</span></h3><p><span style="color: red; ">A.</span> 5000 個まで作ることができます</p><h3 id="Q-ユーザーに-Azure-ロール-RBAC-を割り当てたいです。ロール割り当ての最大数はいくつですか？"><a href="#Q-ユーザーに-Azure-ロール-RBAC-を割り当てたいです。ロール割り当ての最大数はいくつですか？" class="headerlink" title="Q. ユーザーに Azure ロール (RBAC) を割り当てたいです。ロール割り当ての最大数はいくつですか？"></a><span style="color: blue; ">Q. ユーザーに Azure ロール (RBAC) を割り当てたいです。ロール割り当ての最大数はいくつですか？</span></h3><p><span style="color: red; ">A.</span> 2000 まで割り当てることができます。現在、割り当ての上限は 2000 から 4000 に段階的に引き上げられています。<br>4000 を超えてしまう場合は、グループでの付与などを行い、割り当て数を減らすことを検討してください。<br>現在 2000 の状態のお客様で 4000 に引き上げが必要な場合は、弊社までお問い合わせください (引き上げまでには、4 週間から 6 週間ほど時間がかかります。)<br>割り当て上限の引き上げについては、<a href="https://docs.microsoft.com/ja-jp/azure/role-based-access-control/troubleshooting#azure-role-assignments-limit">Azure RBAC のトラブルシューティング</a> の下記記載を参照ください。</p><blockquote><p>すべての Azure サブスクリプションのロールの割り当て制限は、2021 年 11 月以降、2000 から 4000 に自動的に増やされていきます。 サブスクリプションに対して実行する必要があるアクションはありません。 制限の引き上げには数か月かかります。</p></blockquote><h3 id="Q-ユーザーに条件付きアクセスを割り当てたいです。いくつまで正しく動作しますか？"><a href="#Q-ユーザーに条件付きアクセスを割り当てたいです。いくつまで正しく動作しますか？" class="headerlink" title="Q. ユーザーに条件付きアクセスを割り当てたいです。いくつまで正しく動作しますか？"></a><span style="color: blue; ">Q. ユーザーに条件付きアクセスを割り当てたいです。いくつまで正しく動作しますか？</span></h3><p><span style="color: red; ">A. </span> ユーザーごとに最初の 195 個のポリシーが適用されます。</p><h2 id="ゲスト-ユーザーに関する各種上限"><a href="#ゲスト-ユーザーに関する各種上限" class="headerlink" title="ゲスト ユーザーに関する各種上限"></a>ゲスト ユーザーに関する各種上限</h2><h3 id="Q-Azure-AD-には何人までゲスト-ユーザーを招待できますか？"><a href="#Q-Azure-AD-には何人までゲスト-ユーザーを招待できますか？" class="headerlink" title="Q. Azure AD には何人までゲスト ユーザーを招待できますか？"></a><span style="color: blue; ">Q. Azure AD には何人までゲスト ユーザーを招待できますか？</span></h3><p><span style="color: red; ">A.</span> 特に制限はありません。ただし、ユーザー作成と同様にオブジェクト クォータを超えると招待できなくなります。</p><h3 id="Q-ゲスト-ユーザーを一括で招待したいです。何人まで一度に招待できますか？"><a href="#Q-ゲスト-ユーザーを一括で招待したいです。何人まで一度に招待できますか？" class="headerlink" title="Q. ゲスト ユーザーを一括で招待したいです。何人まで一度に招待できますか？"></a><span style="color: blue; ">Q. ゲスト ユーザーを一括で招待したいです。何人まで一度に招待できますか？</span></h3><p><span style="color: red; ">A.</span> CSV をポータルにアップロードする方法の場合、CSV に記載可能な行数までは記載できます。ただし、ポータル上からアップロードする際の処理が最大 1 時間となるため、実際に登録できる最大数は 4 万件です。<br>なお、PowerShell を使用し foreach 文などでループしている構成の場合、制限はありませんが、大量にコマンドを実行するとスロットリングが発生することがあるためご留意ください。  </p><p>詳細につきましては、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/enterprise-users/groups-bulk-import-members#bulk-import-service-limitss">Azure Active Directory でのグループ メンバーの一括追加</a> の公開情報をご確認ください。  </p><blockquote><p>グループ メンバーの一覧をインポートする各一括アクティビティは、最大 1 時間実行できます。 これにより、最大 4 万人のメンバーの一覧をインポートできます。</p></blockquote><h3 id="Q-ゲスト-ユーザーを招待するとき、招待相手のメール-アドレスの文字数は最大何文字ですか？"><a href="#Q-ゲスト-ユーザーを招待するとき、招待相手のメール-アドレスの文字数は最大何文字ですか？" class="headerlink" title="Q. ゲスト ユーザーを招待するとき、招待相手のメール アドレスの文字数は最大何文字ですか？"></a><span style="color: blue; ">Q. ゲスト ユーザーを招待するとき、招待相手のメール アドレスの文字数は最大何文字ですか？</span></h3><p><span style="color: red; ">A. </span> @ の前の文字列を 64 文字以内にしてください。65 文字以上のメール アドレスを設定すると、以下のようにエラーが発生する動作を現時点で確認しております。</p><p><img src="/blog/azure-active-directory/azuread-user-group-limitation/azuread-user-group-limitation1.png"></p><h3 id="Q-ゲスト-ユーザーを招待するときにメールが飛ぶと思います。このメールにカスタマイズしたメッセージを入れたいのですが、何文字まで入れられますか？"><a href="#Q-ゲスト-ユーザーを招待するときにメールが飛ぶと思います。このメールにカスタマイズしたメッセージを入れたいのですが、何文字まで入れられますか？" class="headerlink" title="Q. ゲスト ユーザーを招待するときにメールが飛ぶと思います。このメールにカスタマイズしたメッセージを入れたいのですが、何文字まで入れられますか？"></a><span style="color: blue; ">Q. ゲスト ユーザーを招待するときにメールが飛ぶと思います。このメールにカスタマイズしたメッセージを入れたいのですが、何文字まで入れられますか？</span></h3><p><span style="color: red; ">A.</span> 半角文字は 1 万程度、全角文字は 5000 文字程度までであれば招待できました。ただし、招待されたユーザーが確認しにくくなるため、あまり長いメッセージを入力することはお勧めしません。</p><h2 id="グループ-オブジェクトに関する各種上限"><a href="#グループ-オブジェクトに関する各種上限" class="headerlink" title="グループ オブジェクトに関する各種上限"></a>グループ オブジェクトに関する各種上限</h2><h3 id="Q-Azure-AD-に登録できるグループの最大数はいくつですか？"><a href="#Q-Azure-AD-に登録できるグループの最大数はいくつですか？" class="headerlink" title="Q. Azure AD に登録できるグループの最大数はいくつですか？"></a><span style="color: blue; ">Q. Azure AD に登録できるグループの最大数はいくつですか？</span></h3><p><span style="color: red; ">A.</span> 特に制限はありません。オブジェクト クォータを超えた数は登録できません。</p><h3 id="Q-グループの名前に設定できる文字数は最大いくつですか？"><a href="#Q-グループの名前に設定できる文字数は最大いくつですか？" class="headerlink" title="Q. グループの名前に設定できる文字数は最大いくつですか？"></a><span style="color: blue; ">Q. グループの名前に設定できる文字数は最大いくつですか？</span></h3><p><span style="color: red; ">A.</span> Azure ポータルから セキュリティ グループもしくは Microsoft 365 グループを作成する場合、最大 120 文字となります。</p><h3 id="Q-Microsoft-365-グループを作成しようとしています。グループのメール-アドレスに指定できる文字数は最大いくつですか？"><a href="#Q-Microsoft-365-グループを作成しようとしています。グループのメール-アドレスに指定できる文字数は最大いくつですか？" class="headerlink" title="Q. Microsoft 365 グループを作成しようとしています。グループのメール アドレスに指定できる文字数は最大いくつですか？"></a><span style="color: blue; ">Q. Microsoft 365 グループを作成しようとしています。グループのメール アドレスに指定できる文字数は最大いくつですか？</span></h3><p><span style="color: red; ">A.</span> (@ の前の部分について) 最大 63 文字となります。</p><h3 id="Q-1-つのグループに登録できる所有者は最大何人ですか？"><a href="#Q-1-つのグループに登録できる所有者は最大何人ですか？" class="headerlink" title="Q. 1 つのグループに登録できる所有者は最大何人ですか？"></a><span style="color: blue; ">Q. 1 つのグループに登録できる所有者は最大何人ですか？</span></h3><p><span style="color: red; ">A.</span> 100 人です。</p><h3 id="Q-Microsoft-365-グループのうち、一部だけ有効期限を設定しています。最大いくつグループを選択できますか？"><a href="#Q-Microsoft-365-グループのうち、一部だけ有効期限を設定しています。最大いくつグループを選択できますか？" class="headerlink" title="Q. Microsoft 365 グループのうち、一部だけ有効期限を設定しています。最大いくつグループを選択できますか？"></a><span style="color: blue; ">Q. Microsoft 365 グループのうち、一部だけ有効期限を設定しています。最大いくつグループを選択できますか？</span></h3><p><span style="color: red; ">A.</span> 最大 500 のグループを選択できます。</p><h3 id="Q-1-人のユーザーは、最大いくつのグループに参加できますか"><a href="#Q-1-人のユーザーは、最大いくつのグループに参加できますか" class="headerlink" title="Q 1 人のユーザーは、最大いくつのグループに参加できますか"></a><span style="color: blue; ">Q 1 人のユーザーは、最大いくつのグループに参加できますか</span></h3><p><span style="color: red; ">A.</span> <a href="https://docs.microsoft.com/ja-jp/microsoft-365/admin/create-groups/office-365-groups?msclkid=a63ca996ae6c11ec865707eba0b1824c&view=o365-worldwide#group-limits">管理者向け Microsoft 365 グループの概要</a> の公開情報のとおり、最大 7000 個の Microsoft 365 グループに参加することができます。  </p><p>その他は 特に制限はありませんが、セキュリティ グループと Sharepoint online を使用している場合は、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/enterprise-users/directory-service-limits-restrictions?msclkid=4e123926ae6c11ecb510da31ce1d02f0">Azure AD サービスの制限と制約</a> に記載されている下記点にご留意ください。</p><blockquote><p>セキュリティ グループを SharePoint Online と組み合わせて使用している場合、ユーザーは合計 2,049 のセキュリティ グループに参加できます。 これには、直接および間接グループ メンバーシップが両方とも含まれます。 この制限を超えると、認証と検索の結果は予測不能になります。</p></blockquote><h3 id="Q-グループごとの最大メンバー数はいくつですか"><a href="#Q-グループごとの最大メンバー数はいくつですか" class="headerlink" title="Q. グループごとの最大メンバー数はいくつですか"></a><span style="color: blue; ">Q. グループごとの最大メンバー数はいくつですか</span></h3><p><span style="color: red; ">A. </span> セキュリティ グループおよび M365 グループにはメンバー数の制限はありません。ただし、Microsoft 365 グループで同時通話をする場合は、最大 1000 人までとなります。</p><h2 id="動的グループに関する各種上限"><a href="#動的グループに関する各種上限" class="headerlink" title="動的グループに関する各種上限"></a>動的グループに関する各種上限</h2><h3 id="Q-動的グループは最大いくつ作成できますか"><a href="#Q-動的グループは最大いくつ作成できますか" class="headerlink" title="Q. 動的グループは最大いくつ作成できますか"></a><span style="color: blue; ">Q. 動的グループは最大いくつ作成できますか</span></h3><p><span style="color: red; ">A.</span> 最大 5000 個作成できます。</p><h3 id="Q-動的グループに参加できるメンバーに上限はありますか"><a href="#Q-動的グループに参加できるメンバーに上限はありますか" class="headerlink" title="Q. 動的グループに参加できるメンバーに上限はありますか"></a><span style="color: blue; ">Q. 動的グループに参加できるメンバーに上限はありますか</span></h3><p><span style="color: red; ">A.</span> いいえ、上限はありません。オブジェクト クォータを超えないようご注意ください。</p><h3 id="Q-動的メンバーシップ-クエリに記載できるルールの文字数に上限はありますか"><a href="#Q-動的メンバーシップ-クエリに記載できるルールの文字数に上限はありますか" class="headerlink" title="Q 動的メンバーシップ クエリに記載できるルールの文字数に上限はありますか"></a><span style="color: blue; ">Q 動的メンバーシップ クエリに記載できるルールの文字数に上限はありますか</span></h3><p><span style="color: red; ">A.</span> はい、2048 文字以内に収まるようにルールを記載してください。動作上は 3072 文字まで登録できますが、2048 文字までが想定される文字数です。</p><hr><p>今回は、ユーザーとグループに関する上限および制限についての記事をおまとめしておりますが、お客様のご要望に応じて、今後もアップデートや新しい記事を投稿予定です。</p><p>本記事に追加してほしい内容や、今後投稿してほしい内容のご要望などございました際には、お気軽にお問い合わせいただければ幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure ID チームの小出です。&lt;/p&gt;
&lt;p&gt;今回は、 Azure AD の設定やオブジェクト（ユーザーやグループ）に関する数や文字数の上限について、よくある質問をまとめてご案内します。  &lt;/p&gt;
&lt;h2 id=&quot;はじめに&quot;&gt;&lt;a href=&quot;#はじめ</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Limitation" scheme="https://jpazureid.github.io/blog/tags/Limitation/"/>
    
  </entry>
  
  <entry>
    <title>多要素認証 (MFA) のリセット手順 2022 年版</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/mfa-reset-2022/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/mfa-reset-2022/</id>
    <published>2022-05-08T15:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.701Z</updated>
    
    <content type="html"><![CDATA[<div class="alert is-info"><p class="alert-title">Note</p><p>本記事は 2018 年に公開した <a href="https://jpazureid.github.io/blog/azure-active-directory/mfa-reset/">多要素認証 (MFA) のリセット手順</a> の内容を更新したものです。</p></div><p>こんにちは、Azure &amp; Identity サポート チームの栗井です。</p><p>今回は、Azure AD におけるユーザーの多要素認証 (MFA:Multi-Factor Authentication) のリセット手順についてご紹介します。</p><p>Azure AD では、ログイン時の追加認証方式として電話・アプリ (Microsoft Authenticator) などを使った多要素認証 (MFA) を利用することができ、パスワードのセルフサービス リセット時にも同認証方式を利用させることが可能です。MFA の設定を有効にしている場合、Azure AD にログインをするためには認証方法に指定したスマートフォンなどを利用できる必要がありますが、スマートフォンを紛失してしまった場合や電話番号が無効になった場合などには、MFA で設定していた認証を利用できない状況となり、ユーザー認証を完了することができずサービスを利用することができなくなる場合がございます。<br>このような場合は、Azure AD の管理者による対象ユーザーの MFA 設定のリセットを実施します。</p><p>なお、一般ユーザー権限では他ユーザーの MFA 認証設定のリセットは行うことができません。一般ユーザーは 、ログインができる状態であればユーザー自身で登録されている MFA の設定を変更することはできますが、MFA の追加の認証を受け取れるスマートフォンを紛失したなどの場合に、自ら MFA 設定のリセットを行うことはできません。</p><p>MFA のリセットは、Azure Portal、または PowerShell より行うことが可能です。Azure Portal からの操作では事前準備が不要なため、すぐに操作を実施することができます。</p><p>PowerShell からの操作では、CSV 形式で用意した全ユーザーに対してリセットを行うことができるため、多くのユーザーに対し一括でリセットを行いたい場合に有効です。しかし残念ながら、<strong>PowerShell からの操作がサポートされるのは 2022 年 12 月まで</strong>となります (詳細は後述の通りです)。</p><h2 id="Azure-Portal-での手順"><a href="#Azure-Portal-での手順" class="headerlink" title="Azure Portal での手順"></a>Azure Portal での手順</h2><ol><li><p>該当ユーザーの認証方法設定画面へアクセスします。<br>認証管理者、特権認証管理者、グローバル管理者、のいずれかで Azure Portal (<a href="https://portal.azure.com/">https://portal.azure.com</a>) へログインします。<br>(リセット対象のアカウントが管理者権限を持つアカウントの場合は特権認証管理者またはグローバル管理者にてログインが必要です)</p></li><li><p>[すべてのサービス] &gt; [Azure Active Directory] &gt; [ユーザー] に移動します。</p></li><li><p>ユーザー一覧から、該当ユーザーの行を選択して開きます。 </p></li><li><p>画面左側のメニューから [認証方法] タブを選択します。</p><p> <img src="/blog/azure-active-directory/mfa-reset-2022/auth-method-tab.png">  </p></li><li><p>[MFA の再登録が必要] を押下します。</p><p> <img src="/blog/azure-active-directory/mfa-reset-2022/auth-method-reset.png">  </p></li></ol><p>この後、上記操作が行われたユーザーに対して MFA が要求されるタイミングで、MFA のセットアップ画面 (下記) が表示されます。<br>もしくはユーザーが MFA のセットアップ画面 (<a href="https://aka.ms/mfasetup">https://aka.ms/mfasetup</a>) にアクセスすることでも同画面が表示されます。</p><p><img src="/blog/azure-active-directory/mfa-reset-2022/mfa-required.png">  </p><h2 id="PowerShell-での手順"><a href="#PowerShell-での手順" class="headerlink" title="PowerShell での手順"></a>PowerShell での手順</h2><div class="alert is-info"><p class="alert-title">Note</p><p>下記の方法がサポートされるのは 2022 年 12 月までです。PowrShell からの操作では Azure AD Module (MSOnline) の PowerShell モジュールを利用します。この MSOnline が内部的に利用している <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/update-your-applications-to-use-microsoft-authentication-library/ba-p/1257363">Azure AD Graph のサポートが 2022 年 12 月頃を目安に廃止</a>されるためです。</p><p>現状、他の PowerShell モジュールを利用した MFA のリセット方法はご用意がございません。アップデートがあり次第、本記事を更新いたします。</p></div><p>Azure AD Module (MSOnline) の PowerShell モジュールを利用することで、コマンドによるユーザーの MFA リセットが可能です。MS Online の詳細については下記をご覧ください。</p><ul><li><a href="https://docs.microsoft.com/en-us/powershell/azure/active-directory/overview?view=azureadps-1.0">Azure Active Directory (MSOnline) | Microsoft Docs</a></li></ul><h3 id="MSOnline-のインストール"><a href="#MSOnline-のインストール" class="headerlink" title="MSOnline のインストール"></a>MSOnline のインストール</h3><p>後述の手順を実行する前に、下記コマンドによる MSOnline モジュールのインストールが必要となります。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Install-Module MSOnline</span><br></pre></td></tr></table></figure><h3 id="ユーザーの-MFA-をリセット"><a href="#ユーザーの-MFA-をリセット" class="headerlink" title="ユーザーの MFA をリセット"></a>ユーザーの MFA をリセット</h3><p>以下コマンドを実行し、ユーザーの MFA 設定をリセットできます。 </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Connect-MsolService＃Azure AD へログイン</span><br><span class="line">Set-MsolUser -UserPrincipalName &quot;&lt;リセットしたいユーザーのUPN&gt;&quot; -StrongAuthenticationMethods @()</span><br></pre></td></tr></table></figure><h3 id="ユーザーの-MFA-をリセット-一括操作"><a href="#ユーザーの-MFA-をリセット-一括操作" class="headerlink" title="ユーザーの MFA をリセット (一括操作)"></a>ユーザーの MFA をリセット (一括操作)</h3><p>以下のように CSV からユーザーを読み込んで、一括でリセットを行うことも可能です。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Connect-MsolService＃Azure AD へログイン</span><br><span class="line">$users = Import-Csv &quot;CSV のファイルパス&quot;</span><br><span class="line">foreach ($user in $users) &#123;</span><br><span class="line">    Set-MsolUser -UserPrincipalName $user.UserPrincipalName -StrongAuthenticationMethods @()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>図: 用意する CSV の例</p><p><img src="/blog/azure-active-directory/mfa-reset-2022/csv.png">  </p><h3 id="MFA-リセット済みのユーザーを確認"><a href="#MFA-リセット済みのユーザーを確認" class="headerlink" title="MFA リセット済みのユーザーを確認"></a>MFA リセット済みのユーザーを確認</h3><p>以下のコマンドで、該当のユーザーのMFA の設定がされていない（= リセット済み）であるかどうかを確認することができます。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Get-MsolUser  -UserPrincipalName &quot;&lt;ユーザーのUPN&gt;&quot; | Select UserPrincipalName, DisplayName, StrongAuthenticationMethods | fl*</span><br></pre></td></tr></table></figure><p>すべてのユーザーの情報を一括で取る場合、下記コマンドをご利用ください。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Get-MsolUser -all | Select UserPrincipalName, DisplayName, StrongAuthenticationMethods</span><br></pre></td></tr></table></figure><p>リセットが成功している場合、StrongAuthenticationMethods 属性が {} と表示されます。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PS C:\Users\mikurii&gt; Get-MsolUser  -UserPrincipalName &quot;user@test.onmicrosoft.com&quot; | Select UserPrincipalName, DisplayName, StrongAuthenticationMethods | fl *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">UserPrincipalName           : user@test.onmicrosoft.com</span><br><span class="line">DisplayName                 : 舞黒 太郎</span><br><span class="line">StrongAuthenticationMethods : &#123;&#125;</span><br></pre></td></tr></table></figure><p>何らかの MFA の方法が登録されている (= リセットされていない) 場合は、StrongAuthenticationMethods 属性に “Microsoft.Online.Administration.StrongAuthenticationMethod” といった値が入ります。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PS C:\Users\mikurii&gt; Get-MsolUser  -UserPrincipalName &quot;user@test.onmicrosoft.com&quot; | Select UserPrincipalName, DisplayName, StrongAuthenticationMethods | fl *</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">UserPrincipalName           : user@test.onmicrosoft.com</span><br><span class="line">DisplayName                 : 舞黒 太郎</span><br><span class="line">StrongAuthenticationMethods : &#123;Microsoft.Online.Administration.StrongAuthenticationMethod, Microsoft.Online.Administration.StrongAuthenticationMethod&#125;</span><br></pre></td></tr></table></figure><p>ご不明な点がございましたら弊社サポートまでお気軽にお問い合わせください。上記内容が少しでも皆様の参考となりますと幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;alert is-info&quot;&gt;&lt;p class=&quot;alert-title&quot;&gt;Note&lt;/p&gt;&lt;p&gt;本記事は 2018 年に公開した &lt;a href=&quot;https://jpazureid.github.io/blog/azure-active-directo</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="MFA" scheme="https://jpazureid.github.io/blog/tags/MFA/"/>
    
  </entry>
  
  <entry>
    <title>AD FS 上のアプリをさらに Azure AD に移行するための新機能の提供</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/new-capabilities-that-empower-you-to-migrate-more-of-your-apps/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/new-capabilities-that-empower-you-to-migrate-more-of-your-apps/</id>
    <published>2022-05-08T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.741Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 竜 です。</p><p>本記事は、2022 年 04 月 25 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/new-capabilities-that-empower-you-to-migrate-more-of-your-apps/ba-p/3282145">New capabilities that empower you to migrate more of your apps on AD FS to Azure AD</a> を意訳したものになります。</p><hr><p>皆さん、こんにちは。</p><p>Microsoft のグループ プロダクト マネージャーで、認証プラットフォームを担当している Samuel Devasahayam です。過去数年の間で、何千ものお客様が、何百万ものアプリとユーザーを Active Directory Federation Services (AD FS) から Azure AD に移行しました。あらゆる規模のお客様が、アプリを Azure AD に移行することでビジネスを変革し、その結果、AD FS 環境に関連する基盤の監視やサポート、ならびにパッチの適用の悩みから解放されました。また、コストの削減やセキュリティ体制の強化も実現できています。このような移行の取り組みにより、多要素認証やリスク ベースの条件付きアクセス、Identity Protection など、業界をリードする Azure AD のセキュリティ機能を最大限に活用できるようになり、組織をより保護できるようになりました。</p><p>本日、お客様がほぼすべてのアプリケーションを AD FS や他の ID プロバイダーから Azure AD に容易に移行するための重要な新機能をご紹介できることを嬉しく思います。お客様からの要望に応え、弊社ではトークンに含まれるクレームの改善や変換機能など、Azure AD へのアプリケーションの移行を阻んでいた要素について対応を進めていました。これらの新機能により、お客様は AD FS に関連するコストを削減し、Azure AD にて業界をリードするセキュリティ機能を利用できるようになります。お客様がすべてのアプリを AD FS から Azure AD に簡単に移行できるようにする弊社の取り組みについて、ぜひ以下をご覧ください。</p><h2 id="部分文字列の一致を用いて、トークンに含まれるグループをフィルターする"><a href="#部分文字列の一致を用いて、トークンに含まれるグループをフィルターする" class="headerlink" title="部分文字列の一致を用いて、トークンに含まれるグループをフィルターする"></a><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/reference-claims-mapping-policy-type#group-filter-preview">部分文字列の一致を用いて、トークンに含まれるグループをフィルターする</a></h2><p>初期のオンプレミス AD では、多くのお客様が何百ものグループに所属するユーザーを抱えていたため、Kerberos トークンが肥大化し、特定のアプリケーションにおいて認証に失敗してしまうことがありました。AD FS とフェデレーション アプリケーションの登場により、SAML トークン内のすべてのグループをよりスマートに発行できるよう「グループ フィルタリング」が提供されるようになりました。グループ フィルタリングにより、お客様はアプリケーションが認可の決定を下すために必要なグループのみを指定することができるようになりました。AD FS を導入するお客様が増えるにつれ、複数の入力文字列を用いたより複雑なフィルタリングが行われるようになりました。また、グループ フィルタリングを使用して、AD グループを AWS のロールにマッピングするお客様も多くいらっしゃいました。</p><p>今回、この機能を Azure AD にも導入しました。これにより、「グループ オブジェクトの表示名」または「onPremisesSAMAccountName 属性」の文字列の部分一致により、SAML トークンに含まれるグループのフィルタリングが可能になりました。この機能は現在パブリック プレビューであり、複数のグループ メンバーシップを持つ組織は、アプリケーションに関連するグループを指定し、ユーザーがメンバーであるグループのみがトークンに含まれるようにすることができます。</p><p><img src="/blog/azure-active-directory/new-capabilities-that-empower-you-to-migrate-more-of-your-apps/pic01.png"></p><h2 id="追加のユーザー属性をクレームとして構成する"><a href="#追加のユーザー属性をクレームとして構成する" class="headerlink" title="追加のユーザー属性をクレームとして構成する"></a><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/reference-claims-mapping-policy-type">追加のユーザー属性をクレームとして構成する</a></h2><p>より多くの SaaS アプリケーションを採用するにつれ、SAML トークンで送信する必要のあるユーザー属性 (クレーム) の要件がアプリケーションごとに異なることに気付くと思います。たとえば、Box を使用している一部のお客様は、すべてのユーザーの proxyAddresses を SAML トークンに含めるという要件があります。しかし、このように複数の値を持つ属性は、これまで Azure AD のクレーム発行の仕組みでは利用できませんでした。  </p><p>今回、新たなユーザー属性を Azure AD のクレームとして追加しました。これらの新しい属性は、Azure Portal にて「属性およびクレーム」の設定もしくは Microsoft Graph のクレーム マッピング ポリシーにおいてソースとして使用することができます。これにより、より多くのアプリケーションを AD FS や他の ID プロバイダーから、Azure AD に移行することができます。現在サポートされている新しい属性をすべて確認するには、弊社の<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/reference-claims-mapping-policy-type">クレーム マッピングの公開情報</a>をご覧ください。</p><h2 id="新しい変換機能で-SAML-トークンのクレームをカスタマイズする"><a href="#新しい変換機能で-SAML-トークンのクレームをカスタマイズする" class="headerlink" title="新しい変換機能で SAML トークンのクレームをカスタマイズする"></a><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/reference-claims-mapping-policy-type#claims-transformation">新しい変換機能で SAML トークンのクレームをカスタマイズする</a></h2><p>多くのお客様は、AD FS 上に SaaS アプリケーションを追加し、ユーザー クレームに対して追加の情報を付け加えるよう構成しています。例えば、一部のお客様では Salesforce のユーザー名にインスタンス名 (例: <a href="mailto:&#117;&#x73;&#x65;&#114;&#x40;&#100;&#111;&#109;&#x61;&#x69;&#110;&#46;&#x63;&#111;&#109;&#46;&#x73;&#x74;&#x61;&#103;&#101;">&#117;&#x73;&#x65;&#114;&#x40;&#100;&#111;&#109;&#x61;&#x69;&#110;&#46;&#x63;&#111;&#109;&#46;&#x73;&#x74;&#x61;&#103;&#101;</a>) を含めるように構成しており、AD FS が NameID クレームを発行する際には、末尾に適切な値を付け加えてます。これまで、Azure AD では、テナントで確認されていない UPN ドメイン (@domain.com) を NameID に含めることができなかったため、このようなことはできませんでした。今回パブリック プレビューとなったこの新機能では、確認されていないドメインにおいても、NameID に情報を追加できるようになりました。</p><p>加えて、ドメインの検証を行わずとも NameID のクレームに対して結合の変換機能を使用することが可能です。結合の変換も、他のクレームと同じように NameID クレームで使用できるようになり、より柔軟な変換が可能になりました。</p><p><img src="/blog/azure-active-directory/new-capabilities-that-empower-you-to-migrate-more-of-your-apps/pic02.png"></p><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/active-directory-saml-claims-customization">部分文字列の関数</a> についても、クレーム設定 UI にて一般提供が開始されました。ソース属性から特定の文字を抽出して作成されたクレームを必要とするアプリケーションでは、この部分文字列の関数を使用可能です。  </p><p><img src="/blog/azure-active-directory/new-capabilities-that-empower-you-to-migrate-more-of-your-apps/pic03.png"></p><p>上述のとおり、一部のお客様においては、SAML トークンを用いて Box などのアプリケーションを利用する際に、すべてのユーザーの proxyAddresses の送信が必要な場合があります。同様の状況として、これらの proxyAddress をまず変換し、その後 SAML トークンに含めたいというお客様が多くいらっしゃるということもわかりました。</p><p>そこで、複数の値を持つ属性に対してもクレームの変換をできるようにし、複数の値を持つクレームの発行も可能としました。今回パブリック プレビューとなったこの新機能により、複数要素の最初の項目だけでなく、複数の値を持つクレームのすべての項目に対して変換を適用できるようになりました。</p><p><img src="/blog/azure-active-directory/new-capabilities-that-empower-you-to-migrate-more-of-your-apps/pic04.png"></p><h2 id="正規表現言語-regex-を使用して、グループ-クレームを作成および変換する"><a href="#正規表現言語-regex-を使用して、グループ-クレームを作成および変換する" class="headerlink" title="正規表現言語 (regex) を使用して、グループ クレームを作成および変換する"></a><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/hybrid/how-to-connect-fed-group-claims">正規表現言語 (regex) を使用して、グループ クレームを作成および変換する</a></h2><p>上述のとおり、多くのお客様はグループ フィルタリングを使用して、AD グループを AWS ロールにマッピングしていますが、その中でも、RegEx または RegExReplace を使用してグループ名を AWS ロールの命名規則と一致するように編集している方も多くいらっしゃいます。</p><p>Azure AD でもグループ名に対して同様の RegEx または RegExReplace 変換を実行できるようになりました。この機能は、複数の入力文字列に基づくグループ フィルタリングを実行するために利用できます。複数の文字列に基づくグループ フィルタリングと RegEx の柔軟性により、あるお客様は最近、AD FS アプリケーションのいくつかを直接 Azure AD に移行させることができました。また、とあるヨーロッパの大企業からは「この機能は大変素晴らしく、弊社では Azure AD を唯一の SSO プロバイダーとして利用しているため、この正規表現機能が使用できることはとても有益です。」とフィードバックをいただきました。</p><p><img src="/blog/azure-active-directory/new-capabilities-that-empower-you-to-migrate-more-of-your-apps/pic05.png"></p><p>皆様のアプリを Azure AD に簡単に移行させるこれら新たなアップデートをぜひご活用ただけますと幸いです。AD FS から Azure AD へのアプリの移行においては、以下のガイダンスも併せてご参照ください。</p><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/manage-apps/migrate-adfs-apps-to-azure">アプリケーション認証を Azure Active Directory に移動する</a></li><li><a href="https://techcommunity.microsoft.com/t5/core-infrastructure-and-security/ad-fs-to-azure-ad-migrations-notes-from-the-field/ba-p/2635847">AD FS to Azure AD Migrations: Notes from the Field - Microsoft Tech Community</a></li></ul><p>Azure AD ですべてのアプリケーションをより簡単に管理できるようにするよう弊社が進めているアップデートや取り組みについては近日中にさらに発表される予定です。 </p><p>いつものように、フィードバックや提案をお待ちしています。以下のコメントまたは Twitter (@AzureAD) でご意見をお聞かせください。</p><p>Samuel Devasahayam (@MrADFS)<br>Group Product Manager<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 竜 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 04 月 25 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>FIDO 標準の拡張と Microsoft のパスワードレス ソリューションへの新たなアップデート</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/expansion-of-fido-standard-and-new-updates-for-microsoft/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/expansion-of-fido-standard-and-new-updates-for-microsoft/</id>
    <published>2022-05-06T01:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.577Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 5 月 5 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/expansion-of-fido-standard-and-new-updates-for-microsoft/ba-p/3290633">Expansion of FIDO standard and new updates for Microsoft passwordless solutions</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>そして、Happy World Password Day! 本日は、素晴らしいニュースをお伝えしたいと思います。Microsoft は、FIDO アライアンスと World Wide Web コンソーシアムによって作成された共通のパスワードレス標準の拡張を、FIDO アライアンスならびに他の主要なプラットフォームと共にサポートすることを発表いたしました。これらのマルチ デバイスの FIDO 資格情報は、パスキーとも呼ばれるものであり、パスワードのない世界に向けた記念すべき一歩を意味します。また、Azure Active Directory (Azure AD) とWindows におけるパスワードレス ソリューションにおいてもいくつかの素晴らしいアップデートが予定されており、パスワードレスをより多くのユース ケースで利用可能になる予定です。</p><p>パスワードは、私たちのデジタル世界での営みを守る上で、決して十分な仕組みではありません。Vasu Jakkal 氏が <a href="https://www.microsoft.com/security/blog/2022/05/05/this-world-password-day-consider-ditching-passwords-altogether/">本日報告</a> したように、毎秒 921 回以上のパスワード攻撃が発生しています。多くの攻撃者があなたのパスワードを狙っており、あなたからそれを盗もうとし続けるでしょう。パスワードから脱却し、攻撃を断ち切ることが必要です。</p><h2 id="パスワードをパスキーに置き換える"><a href="#パスワードをパスキーに置き換える" class="headerlink" title="パスワードをパスキーに置き換える"></a>パスワードをパスキーに置き換える</h2><p>パスキーは、より安全で速く、より簡単であり、パスワードの代わりとなるものです。パスキーを使えば、顔認証、指紋認証、デバイスの PIN を使うだけで、サポートされているあらゆるウェブサイトやアプリケーションにサインインすることができます。パスキーは、高速でフィッシング耐性があり、主要なデバイスとプラットフォームでサポートされる予定です。また、パスキーは同じプラットフォーム上の複数のデバイス間で同期することができるため、デバイスごとに登録する必要がなく、デバイスのアップグレードや紛失の際にも保護されます。現在、Windows Hello を利用することでパスキーをサポートするサイトにサインインが可能です。近い将来、Apple や Google のデバイス上からパスキーを使用して Microsoft アカウントにサインインできるようになります。</p><p>ぜひウェブサイトの所有者やアプリ開発者の皆様においては、Microsoft、Apple、Google および FIDO アライアンスに参加してパスキーをサポートし、私たちのビジョンである真のパスワードレスの世界の実現に貢献いただければと思っています。</p><p><img src="/blog/azure-active-directory/expansion-of-fido-standard-and-new-updates-for-microsoft/FIDO_passkey_image.jpg"></p><h2 id="パスワードレスにむけて"><a href="#パスワードレスにむけて" class="headerlink" title="パスワードレスにむけて"></a>パスワードレスにむけて</h2><p>マイクロソフトは、Windows Hello の FIDO2 認証など、FIDO 標準の <a href="https://techcommunity.microsoft.com/t5/windows-it-pro-blog/windows-hello-fido2-certification-gets-you-closer-to/ba-p/534592">初期からのサポーター</a> として取り組んできました。パスキーをサポートするよう FIDO 標準のエコ システムを進化させ、パスワードレス認証の普及が勢いを増しているのはとても喜ばしいことです。</p><p>約 5 年前にパスワードレス サインインの導入を開始して以来、毎月パスワードを使わずにサインインするユーザー数は、Microsoft のサービス全体で 2 億 4 千万人以上に達しています。また、この半年間で 33 万人以上の方が、Microsoft アカウントから <a href="https://www.microsoft.com/security/blog/2021/09/15/the-passwordless-future-is-here-for-your-microsoft-account/">パスワードを削除する</a> という次のステップに進んでいます。結果として、パスワードがなければパスワード ベースの攻撃から完全に保護されるのです。</p><p>本日、併せて企業がより簡単に、そして完全なパスワードレスを実現するための新機能も発表いたします。</p><h2 id="Windows-365、Azure-Virtual-Desktop、Virtual-Desktop-Infrastructure-向けのパスワードレス"><a href="#Windows-365、Azure-Virtual-Desktop、Virtual-Desktop-Infrastructure-向けのパスワードレス" class="headerlink" title="Windows 365、Azure Virtual Desktop、Virtual Desktop Infrastructure 向けのパスワードレス"></a>Windows 365、Azure Virtual Desktop、Virtual Desktop Infrastructure 向けのパスワードレス</h2><p>リモートもしくはハイブリッドでの業務が一般的となった今、多くの人がリモートもしくはバーチャルデスクトップを使用して業務を遂行してます。この度、パスワードレスを Windows 365、Azure Virtual Desktop、Virtual Desktop Infrastructure でサポートいたします。現在は Windows 11 Insider でプレビュー中ですが、今後 Windows 10 でも利用可能とする予定です。</p><h2 id="Windows-Hello-for-Business-クラウド信頼"><a href="#Windows-Hello-for-Business-クラウド信頼" class="headerlink" title="Windows Hello for Business クラウド信頼"></a>Windows Hello for Business クラウド信頼</h2><p>Windows Hello for Business クラウド信頼は、ハイブリッド環境向けの Windows Hello の展開作業をよりシンプルにします。この新しい展開モデルでは、従来の要件であった公開鍵基盤 (PKI) に加え、Azure AD とオンプレミスの AD 間の公開鍵の同期が不要となります。この改善により、ユーザーが Windows Hello for Business をプロビジョニングしてから認証できるまでの遅延がなくなり、Windows Hello for Business を使用してオンプレミスのリソースやアプリケーションにアクセスすることがこれまで以上に容易になりました。<a href="https://docs.microsoft.com/ja-jp/windows/security/identity-protection/hello-for-business/hello-hybrid-cloud-trust">クラウド信頼</a> は、Windows 10 21H2 および Windows 11 21H2 において、プレビューとして利用可能です。</p><h2 id="Microsoft-Authenticator-で複数のパスワードレス-アカウントを利用"><a href="#Microsoft-Authenticator-で複数のパスワードレス-アカウントを利用" class="headerlink" title="Microsoft Authenticator で複数のパスワードレス アカウントを利用"></a>Microsoft Authenticator で複数のパスワードレス アカウントを利用</h2><p>Azure AD (職場または学校のアカウント) にパスワードレス サインインを導入した当初、Microsoft Authenticator では 1 つのパスワードレス アカウントしか利用できませんでした。この度その制限が撤廃され、いくらでも登録が可能となります。今月末から iOS ユーザーは、この機能を利用できるようになり、その後 Android でも利用できるようになる予定です。</p><p><img src="/blog/azure-active-directory/expansion-of-fido-standard-and-new-updates-for-microsoft/sdriggers_0-1651671669087.png" alt="Microsoft Authenticator を使用した Azure AD アカウントでのパスワードレス電話サインイン_"></p><h2 id="Azure-AD-一時アクセス-パス"><a href="#Azure-AD-一時アクセス-パス" class="headerlink" title="Azure AD 一時アクセス パス"></a>Azure AD 一時アクセス パス</h2><p>Azure AD の一時アクセス パスは、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/howto-authentication-temporary-access-pass">時間制限のあるパスコード</a> です。パブリック プレビューの時から企業で大きな反響を呼んでおり、今夏の機能リリースに向けて、さらに利用範囲を広げようと取り組んでいます。多くのお客様から、新しい Windows デバイスをセットアップする際にパスワードの代わりに一時アクセス パスを配布したいとの声をいただいています。一時アクセス パスは、初回サインイン、Windows Hello の設定、Azure AD へのデバイスの参加に使用できるようになります。このアップデートは来月提供される予定です。</p><p><img src="/blog/azure-active-directory/expansion-of-fido-standard-and-new-updates-for-microsoft/sdriggers_1-1651671669096.png" alt="Windows 11 のオンボーディングにおける一時アクセス パスのユーザー体験"></p><h2 id="パスワードレスの導入を進めているお客様"><a href="#パスワードレスの導入を進めているお客様" class="headerlink" title="パスワードレスの導入を進めているお客様"></a>パスワードレスの導入を進めているお客様</h2><p>Microsoft の主要なお客様において、すでにパスワードレス ソリューションを導入している素晴らしい例がいくつかございます。例えば Avanade 社は、顧客のデータをセキュリティ侵害から保護するために <a href="https://customers.microsoft.com/en-us/story/1478724941851112337-avanade-partner-professional-services-teams">Feitian 社の支援を受けてパスワードレスを実現</a> しました。在宅医療とホスピス ケアを提供する Amedisys 社は、患者の個人情報を保護するために <a href="https://customers.microsoft.com/en-us/story/1429879293982833570-amedisys-health-provider-security">パスワードレスを導入</a> しました。両社とも、セキュリティの強化だけでなく、エンドユーザーにとってサインインがより簡単になるよう、パスワードレス認証の利用に取り組んでいます。</p><p>いつものように皆様のコメントをおまちしております。<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/howto-authentication-passwordless-deployment">こちらのドキュメント</a> をご覧いただき、さらに詳しい情報は <a href="https://aka.ms/gopasswordless">aka.ms/gopasswordless</a> でご確認ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 5 月 5 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>検証可能な資格情報のパブリック プレビューが拡大</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/expanding-the-public-preview-of-verifiable-credentials/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/expanding-the-public-preview-of-verifiable-credentials/</id>
    <published>2022-05-06T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.573Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 5 月 4 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/expanding-the-public-preview-of-verifiable-credentials/ba-p/3295508">Expanding the public preview of verifiable credentials​</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>この数ヶ月の間に、1,000 以上の企業において <a href="https://go.microsoft.com/fwlink/p/?LinkID=2184957&clcid=0x409&culture=en-us&country=US">職場のリモート オンボーディング</a> や <a href="https://customers.microsoft.com/en-us/story/1478082375112165122-avanade-partner-professional-services-verifiable-credentials">ビジネスの境界を越えたコラボレーション</a>、<a href="https://customers.microsoft.com/en-us/story/1481006006183422060-rmit-university-higher-education-azure-active-directory?culture=en-us&country=US">学外での教育</a> など、さまざまなシナリオで使用される何万件もの検証可能な資格情報が発行ならびに検証されました。検証可能な資格情報は新しい W3C 標準で、これによりエンド ユーザーは自身の雇用履歴や学歴、その他の認定状態を表すデジタルな資格情報を、改ざん不可能で安全かつ検証可能な方法で簡単に提示できるようになります。このたび、Azure Active Directory (Azure AD) の Free ライセンスおよび Premium ライセンスのユーザー向けに、検証可能な資格情報のパブリック プレビューを拡大し、機能拡張を発表できることを嬉しく思います。</p><blockquote><p><strong>「検証可能な資格情報には、すでに約 60 種類のユースケースがあると言われています。非常に柔軟性が高いため、組織全体で何百もの異なる方法で使用できる可能性があります」。</strong><br><strong>- Avanade 社のカスタマー ストーリー全文は <a href="https://customers.microsoft.com/en-us/story/1478082375112165122-avanade-partner-professional-services-verifiable-credentials">こちら</a> からご覧ください。</strong></p></blockquote><p>エンド ユーザー、管理者、開発者のエクスペリエンスを向上させるために、お客様や Decentralized ID コミュニティから得たフィードバックに感謝しています。このたび、プラットフォームの新機能についてお知らせできることを光栄に思うとともに、より多くのお客様や開発者が自信を持ってより大きな規模で資格情報を発行および検証する中で、新しいシナリオが発掘されることを楽しみにしています。</p><h2 id="最新機能"><a href="#最新機能" class="headerlink" title="最新機能"></a>最新機能</h2><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/verifiable-credentials/">Azure AD の検証可能な資格情報</a> は、Azure AD のすべてのお客様が利用できるようになりました。プラットフォームのアップデートに関しては <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/verifiable-credentials/whats-new">最新機能の公開情報</a> にまとまっていますが、以下ではそのハイライトを簡単に紹介します。</p><h2 id="プライバシーを尊重した状態チェック"><a href="#プライバシーを尊重した状態チェック" class="headerlink" title="プライバシーを尊重した状態チェック"></a>プライバシーを尊重した状態チェック</h2><p>W3C の状態リストの標準をサポートすることで、検証可能な資格情報の利用者に対しプライバシー機能をさらに拡張し、ユーザー、発行者、Relying party に対してプライバシーを維持した状態チェックを可能にしました。詳細な情報は <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/verifiable-credentials/how-to-issuer-revoke">こちら</a> でご覧いただけます。</p><p><img src="/blog/azure-active-directory/expanding-the-public-preview-of-verifiable-credentials/sdriggers_0-1651256593834.png" alt="ユーザーは、発行者に自身の情報を開示するリスクを負うことなく、誰とでも状態を確認することができます。"></p><h2 id="最高の開発者体験を提供"><a href="#最高の開発者体験を提供" class="headerlink" title="最高の開発者体験を提供"></a>最高の開発者体験を提供</h2><p>弊社が公開する API は進化を続けています。昨年は、Node.js SDK を廃止し、よりリッチな開発者体験を提供するべく、検証可能な資格情報の発行者や検証者向けに新しい <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/verifiable-credentials/get-started-request-api?tabs=http">リクエスト サービス API</a> の提供を開始しました。私たちは、API ファーストの姿勢を続けるとともに、より大きな Azure API との統合も検討しており、これにより、検証可能な資格情報を扱う開発者様に最高のおもてなしを提供できると考えています。弊社で用意した <a href="https://github.com/Azure-Samples/active-directory-verifiable-credentials">サンプル アプリケーション</a> を試すか、<a href="hhttps://github.com/Azure-Samples/active-directory-verifiable-credentials/tree/main/Postman">Postman</a> を使用して API を直接テストすることも可能です。</p><p><img src="/blog/azure-active-directory/expanding-the-public-preview-of-verifiable-credentials/sdriggers_1-1651256593838.png"></p><h2 id="ヨーロッパでのコンプライアンス向上"><a href="#ヨーロッパでのコンプライアンス向上" class="headerlink" title="ヨーロッパでのコンプライアンス向上"></a>ヨーロッパでのコンプライアンス向上</h2><p>Azure AD の検証可能な資格情報のデータは、EU 地域に所在するテナントに対して、EU 域内で処理されるようになりました。Azure における <a href="https://azure.microsoft.com/en-us/global-infrastructure/data-residency/#select-geography">データ所在地</a> と、Microsoft EU Data Boundary プログラムの一環としての顧客データ保護へのコミットメントについては <a href="https://techcommunity.microsoft.com/t5/security-compliance-and-identity/eu-data-boundary-for-the-microsoft-cloud-frequently-asked/ba-p/2329098">こちら</a> をご覧ください。</p><h2 id="今後もご期待ください！"><a href="#今後もご期待ください！" class="headerlink" title="今後もご期待ください！"></a>今後もご期待ください！</h2><p>今後の予定では、ディレクトリ属性やカスタム データ ソースに基づいて資格情報を発行および検証するためのローコードもしくはノーコードの開発体験や、検証可能な資格情報のネットワークにおいて、検証可能な資格情報全体で信頼できる発行者を簡単に発見できるワーク フローなど管理者の体験を統合する API を含めた検討を進めています。</p><p>すべての Azure AD の利用者で、資格情報の作成、発行、検証が可能ですので、ぜひ以下のリソースを参照ください。</p><h2 id="始めてみましょう"><a href="#始めてみましょう" class="headerlink" title="始めてみましょう"></a>始めてみましょう</h2><ul><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/verifiable-credentials/">Azure AD の検証可能な資格情報のパブリック プレビュー</a></li><li>アップデートに関する情報の一覧 <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/verifiable-credentials/whats-new">パブリック プレビュー リリースの新機能</a></li></ul><p>いつものように、皆様からのフィードバックやご意見をお待ちしています。以下のコメント欄、Twitter (<a href="https://twitter.com/azuread">@AzureAD</a>)、または <a href="https://feedback.azure.com/d365community/forum/22920db1-ad25-ec11-b6e6-000d3a4f0789">Azure Feedback Forum</a> でご意見をお聞かせください。</p><h2 id="検証可能な資格情報と-Decentralized-ID-についてもっと知る"><a href="#検証可能な資格情報と-Decentralized-ID-についてもっと知る" class="headerlink" title="検証可能な資格情報と Decentralized ID についてもっと知る"></a>検証可能な資格情報と Decentralized ID についてもっと知る</h2><p>検証可能な資格情報は、認証機関 (発行者) から発行された ID 情報を含む、署名されたコンテナのようなもので、個人またはエンティティ (保有者) が希望したタイミングで他のエンティティ (検証者) とその情報を共有できるという仕組みです。Azure AD が提供するサービスの一機能として、雇用状態や学歴、またはその他の要求を満たす証明として、検証可能な資格情報を簡単に発行および検証できるようにします。また、そのような資格情報の保有者が、いつ、誰と資格情報を共有するかを選べるようになります。これにより、プライバシーとセキュリティの保護に優れた新しい種類の身元確認が可能になり、さらに資格情報は再利用可能であるため、より利便性が向上します。 </p><p>さらに詳しく知りたい方は、以下のリソースもご覧ください。 </p><ul><li>顧客事例と検証可能な資格情報のリソースについては<a href="https://www.microsoft.com/en-us/security/business/identity-access-management/verifiable-credentials">aka.ms/verifyonce</a> で入手可能です。</li><li>全 5 回にわたる <a href="https://jpazureid.github.io/blog/azure-active-directory/join-us-to-build-solutions-using-decentralized-identities/">ブログ シリーズ</a> で、Decentralized ID の基本を理解いただけます。</li><li>Decentralized ID の動向については <a href="https://www.microsoft.com/en-us/security/business/identity-access-management/decentralized-identity-solution">aka.ms/ownyouridentity</a> で詳しく説明しています。</li><li>Decentralized ID (DID) についての業界ワーキング グループである <a href="http://identity.foundation/">http://identity.foundation</a> に参加いただけます。</li><li>簡単な概要: <a href="http://aka.ms/didexplained">http://aka.ms/didexplained</a></li><li>開発者向けドキュメント: <a href="http://aka.ms/didfordevs">http://aka.ms/didfordevs</a></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 5 月 4 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Authenticator による強力なパスワードの生成</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/generate-strong-passwords-with-microsoft-authenticator/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/generate-strong-passwords-with-microsoft-authenticator/</id>
    <published>2022-05-05T00:30:00.000Z</published>
    <updated>2022-05-21T10:28:09.585Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 5 月 2 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/generate-strong-passwords-with-microsoft-authenticator/ba-p/3299050">Generate strong passwords with Microsoft Authenticator​</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p><a href="https://go.microsoft.com/fwlink/?linkid=2174134">Microsoft Authenticator</a> において強力なパスワード生成機能の一般提供を発表できることを、嬉しく思います。Authenticator は、現在 7,500 万人以上のアクティブ ユーザーを持ち、Azure AD を使用する企業で最も人気のある認証方法となる勢いであり、皆様から多くの素晴らしいフィードバックを頂いております。このフィードバックは、ロケーション ベースのアクセス制御、認証コンテキスト、アプリ内でのログイン履歴の確認、そしてもちろんパスワード管理機能といった素晴らしい機能の実装に直接的に繋がっています。 </p><p>このブログでは、Authenticator の最新かつ最高の機能である、<strong>強力でランダムなパスワードを生成する機能</strong> について Rajat Luthra が説明します。パスワードが危険にさらされる最も一般的なシナリオは、予測しやすいパスワード (“Password123!” など) を複数のアカウントに対して順に試すこと (パスワード スプレーと呼ばれる手法) です。レインボー テーブル攻撃や辞書攻撃も、パスワードに含まれる一般的な単語やフレーズに依存しています。 強力でランダムに生成されるパスワードにより、これらの攻撃を防ぐことができます。以前のご案内のとおり、そして Rajat が以下で指摘するように、パスワードレス認証が最善であり、可能であれば常に MFA を有効に設定ください。しかし、どうしてもパスワードを使用しなければならない場合は、強力でランダムに生成されるパスワードが最適です。以下、Rajat より Authenticator の新機能について説明します。</p><p>これからも皆様からのご意見をお待ちしております。<br>Alex Weinert (Teitter: <a href="https://twitter.com/Alex_T_Weinert">@Alex_T_Weinert</a>)</p><hr><p>皆さん、こんにちは。Microsoft Authenticator チームのプロダクト マネージャーである Rajat Luthra です。</p><p>Microsoft Authenticator は、パスワードレス認証、プッシュ通知、時間ベースのワンタイム パスワード (TOTPs)、セキュリティ アラートにより、ユーザーの安全を確保します。また、あらゆるアプリケーションやウェブサイトで、<a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/securely-manage-and-autofill-passwords-across-all-your-mobile/ba-p/1994720">パスワード</a> や <a href="https://jpazureid.github.io/blog/azure-active-directory/autofill-your-addresses-and-payment-info-with-microsoft/">その他の個人情報</a> を記憶し、自動入力することができます。すべての Microsoft アカウントがパスワードレス認証 (最も望ましい認証方法) をサポートしていますが、すべての ID プロバイダーがパスワードレス認証をサポートしているわけではありません。ユーザーをさらに保護するために、Microsoft Authenticator は、複雑でユニークなパスワードをアプリ内で直接生成できるようになりました。ソーシャル メディアやネットショッピング、仕事用のアプリ、ゲームなど、全てのオンライン アカウントのパスワードをモバイル デバイス上で生成、同期、保存、そして自動入力することが可能となります。</p><p>Android では、アプリまたはウェブサイト上でパスワードが必要な場合、Authenticator が新しい強力なパスワードを生成するよう提案します。</p><p><img src="/blog/azure-active-directory/generate-strong-passwords-with-microsoft-authenticator/image01.gif"></p><p>IOS では、アプリやウェブサイトを利用中に、キーボードを使って Authenticator を開き、新しい強力なパスワードを作成することができます。</p><p><img src="/blog/azure-active-directory/generate-strong-passwords-with-microsoft-authenticator/image02.gif"></p><p>モバイル端末のパスワードを同期していない場合は、Microsoft Authenticator を開いて [パスワード] タブを開き、<a href="https://account.microsoft.com/account">Microsoft アカウント</a> を使用してデータの同期を開始ください。併せて、<a href="https://go.microsoft.com/fwlink/?linkid=2172589">Authenticator を既定の自動入力プロバイダとして選択していることも確認ください</a>。</p><p>デスクトップで Google Chrome をお使いの場合は、Google Chrome ウェブ ストアにある <a href="https://go.microsoft.com/fwlink/?linkid=2174025">Microsoft Autofill Extension</a> を使用して強力なパスワードを生成することができます。生成および保存されたパスワードは、Microsoft Authenticator アプリがインストールされているモバイル デバイス、<a href="https://go.microsoft.com/fwlink/?linkid=2172875">Microsoft Edge</a> および <a href="https://go.microsoft.com/fwlink/?linkid=2174025">Microsoft Autofill Extension for Google Chrome</a> がインストールされているデスクトップなど、同じ <a href="https://go.microsoft.com/fwlink/?linkid=2144423">Microsoft アカウント</a> でログインしているすべてのデバイスで同期および自動入力が行われます。</p><p><img src="/blog/azure-active-directory/generate-strong-passwords-with-microsoft-authenticator/image03.gif"></p><p>すべての新しいパスワードは、エンタープライズ レベルのパスワード生成アルゴリズムを使用してランダムに生成されます。</p><p><strong>注</strong>: 自動入力では、個人の <a href="https://go.microsoft.com/fwlink/?linkid=2144423">Microsoft アカウント</a> を使用してデータが同期されます。職場や学校のアカウント (Azure Active Directory など) とデータを同期することはできません。Microsoft Authenticator に [パスワード]、[支払い]、または [アドレス] タブが表示されない場合、お客様の組織の設定で、ユーザーの個人用 Microsoft アカウントを使用した自動入力がオフになっている可能性があります。</p><p>詳しくは、<a href="https://go.microsoft.com/fwlink/?linkid=2172589">こちら</a> をご覧いただければと思います。Authenticator の機能をより良くする方法について、皆様のご意見をお聞かせください。製品改善のための <a href="https://forms.office.com/r/KnSdMABzVM">簡単なアンケート</a> にご協力いただければ幸いです。</p><p>Rajat Luthra (Twitter: <a href="https://twitter.com/_luthrarajat">@_LuthraRajat</a>)</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 5 月 2 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD RBAC - ユーザーおよびデバイス用の動的な管理単位がパブリック プレビューとなりました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/azure-ad-rbac-dynamic-administrative-units-now-in-public-preview/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/azure-ad-rbac-dynamic-administrative-units-now-in-public-preview/</id>
    <published>2022-05-05T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.465Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 4 月 12 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/azure-ad-rbac-dynamic-administrative-units-now-in-public-preview/ba-p/3185207">Azure AD RBAC: Dynamic administrative units now in public preview for users &amp; devices</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>Azure Active Directory (以下 Azure AD) のロールベース アクセス コントロール (RBAC) の一連の発表の一部として、動的な管理単位のパブリック プレビューをご案内できることを嬉しく思っています。</p><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/roles/admin-units-members-dynamic">動的な管理単位</a> を使用すると、管理単位のメンバーシップを手動で管理する必要がなくなります (もしくは、メンバーシップを管理するための独自の自動化の仕組みを作る必要もなくなります)。代わりに、Azure AD では、ユーザーまたはデバイスの属性に基づいてクエリを指定し、手動で管理することなく、メンバーシップを維持することができるようになります。</p><p>これらの新しい機能を使ったシナリオをいくつかご紹介いたします。</p><p><a href="https://youtu.be/rqbCjzIQ_gA">動画: ユーザー向け動的な管理単位</a></p><p>また、RBAC に関連する他の発表内容は、以下からご覧いただけます。</p><ul><li><a href="https://jpazureid.github.io/blog/azure-active-directory/azure-ad-rbac-custom-roles-amp-administrative-units-for-devices/">Azure AD RBAC - デバイス用のカスタム ロールと管理単位が利用可能に</a></li><li><a href="https://jpazureid.github.io/blog/azure-active-directory/custom-roles-for-app-management-now-available/">Azure AD RBAC でアプリ管理用のカスタム ロールが利用可能になりました</a></li></ul><h2 id="ユーザー-メンバーシップを簡単に管理するためのルールを作成する"><a href="#ユーザー-メンバーシップを簡単に管理するためのルールを作成する" class="headerlink" title="ユーザー メンバーシップを簡単に管理するためのルールを作成する"></a>ユーザー メンバーシップを簡単に管理するためのルールを作成する</h2><p>動的メンバーシップ ルールを作成するには、管理単位に移動して、<strong>プロパティ</strong> タブをクリックします。この例では、Human Resources 部門を表す管理ユニットを作成しています。</p><p><strong>プロパティ</strong> ブレードで、<strong>メンバーシップの種類</strong> を <strong>動的ユーザー</strong> に設定します。次に、<strong>動的クエリ</strong> の追加をクリックして、動的ルールを作成します。</p><p><img src="/blog/azure-active-directory/azure-ad-rbac-dynamic-administrative-units-now-in-public-preview/image01.jpg"></p><p>ここでは、ルール ビルダーを使用して、部署が「Human Resources」であるすべてのユーザーを含む、基本的なルールを作成しています。動的グループに使用するのと同じ構文を使用して、より複雑なルールを作成することもできます (作成方法の詳細については、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/enterprise-users/groups-dynamic-membership">このページ</a> を参照ください)。</p><p><img src="/blog/azure-active-directory/azure-ad-rbac-dynamic-administrative-units-now-in-public-preview/image02.jpg"></p><p>ルールを作成したら、<strong>保存</strong> をクリックして、ルールの構文を保存します。次に、プロパティ ブレードでもう一度 <strong>保存</strong> をクリックして、管理単位へのメンバーシップの変更を保存します。動的グループの処理エンジンが、ルールに一致するユーザーを、数分以内に管理単位に反映するよう動作します。</p><p><img src="/blog/azure-active-directory/azure-ad-rbac-dynamic-administrative-units-now-in-public-preview/image03.jpg"></p><p><strong>ロールと管理者</strong> タブに移動して管理ロールを管理単位に付与すると、動的メンバーシップの処理エンジンによって、スコープが自動的に更新されるようになります。</p><p>今回の例では、Human Resources 管理単位に <strong>パスワード管理者</strong> ロールを割り当てて、Human Resources 部門の従業員のパスワードを管理する権限を委譲しています。</p><p><img src="/blog/azure-active-directory/azure-ad-rbac-dynamic-administrative-units-now-in-public-preview/image04.jpg"></p><h2 id="今後の予定"><a href="#今後の予定" class="headerlink" title="今後の予定"></a>今後の予定</h2><p>今後は、ひとつの動的な管理単位においてユーザーとデバイスの両方をサポートし、動的なクエリを構築する際に利用可能な追加のプロパティを提供することを検討しています。また、管理単位とカスタム ロールに関連する Azure AD RBAC の領域で、より素晴らしい機能を実現するために取り組んでいます。今後のアナウンスにご期待ください。</p><p>Alex Simons (Twitter: <a href="https://twitter.com/Alex_A_Simons">@Alex_A_Simons</a>)<br>Corporate VP of Program Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 4 月 12 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>アクセス許可の管理における用語とマルチクラウド環境におけるインパクト</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/permissions-management-terms-and-their-impact-in-multicloud/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/permissions-management-terms-and-their-impact-in-multicloud/</id>
    <published>2022-04-30T23:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.777Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2022 年 4 月 28 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/permissions-management-terms-and-their-impact-in-multicloud/ba-p/3282144">Permissions Management Terms and their Impact in Multicloud Environments</a> を意訳したものになります。</p><p>不明点がありましたら、弊社サポート チームまでお問い合わせください。</p><hr><p>毎日のように、新しいクラウド セキュリティの用語や略語を耳にしているかと思います。特に、文脈によって異なる意味を持つ用語が多いため、多くの用語を理解するのは大変ですし圧倒されてしまうことも多いと思います。このブログでは、アクセス許可の管理をより深く理解するために、一般的な用語とその意味、そしてなぜそれが重要なのかをまとめています。このブログが役に立ち、さらに学びたいと思われた方は、ぜひ <a href="https://aka.ms/PermissionsManagementGlossary">こちら</a> のアクセス許可の管理用語集をご覧ください。</p><p><strong>クラウド サービス (Cloud Services)</strong></p><p>クラウド サービスとは、サードパーティーのプロバイダーを経由して要求に応じてユーザーに提供されるサービスのことを指します。主なサービスのカテゴリーとしては以下のとおり、IaaS (Infrastructure-as-a-Service)、PaaS (Platforms-as-a-Service)、SaaS (Software-as-a-Service) などが挙げられます。これらのサービスに対して適切かつ安全なアクセスを提供することは、一層複雑になっています。このような大量のクラウド サービスを正確かつ効率的に管理するには、サービスの全体像とそれにアクセスするユーザーを明確に把握する必要があります。</p><p><strong>最小限の特権 (Least Privilege)</strong></p><p>ゼロ トラストの基盤を構築し維持する上で、最小特権の原則はこの基盤を築くための重要な柱の 1 つです。最小特権を維持するということは、日々の業務を完了するために必要な最小限の特権を ID に付与することを意味します。クラウド基盤におけるアクセス許可と ID の爆発的な増加を考慮すると、最小権限の原則を手動で適用することはほとんど不可能になっています。組織は、この重要なタスクを自動化し、デジタル資産の安全を確保するためのソリューションを必要としています。</p><p><strong>アクセス許可 (Permission)</strong></p><p>アクセス許可は、リソースに対して操作を実行するための権限を ID に与えるものです。マルチクラウド基盤の普及に伴い、アクセス許可を効果的に管理することがますます困難になっています。主要なクラウドでは、何千ものアクセス許可を付与することが可能であり、その半分以上は、不適切に使用された場合にサービスの中断、サービス品質の低下、データ漏洩を引き起こす可能性のある高リスクのアクセス許可です (※)。マルチクラウド戦略を進め、偶発的または悪意ある誤用を回避するためには、アクセス許可の管理を効率的に行うことが不可欠です。</p><p><strong>リソース (Resources)</strong></p><p>リソースとは、仮想マシン、サーバーレス機能、ネットワーク、ストレージ オブジェクトなど、コンピューティング機能を使用する実体を指します。リソースはお客様の基盤にとって非常に重要であるため、リソースに対して誰がどのような操作を実行できるかを完全に可視化しておくことが重要です。</p><p><strong>スーパー ユーザー / スーパー ID (Super User / Super Identity)</strong></p><p>スーパー ユーザーまたはスーパー ID は、クラウド基盤全体のすべてのリソースに対して任意の操作を実行できる強力な ID です。これらの ID は、もともと強力で必要以上の権限を持つため、適切に管理にすることが特に重要です。悪意のある、または偶発的な権限の誤用は、組織のセキュリティにとって大きなリスクとなります。</p><p><strong>ワークロード ID (Workload Identities)</strong></p><p>ワークロード ID (しばしば非人間の ID とも呼ばれる) は、コンテナ、VM、アプリケーション、サービスなどのソフトウェア ワークロードを想定したもので、認証した後に他のサービスやリソースにアクセスできるようにするために使用されます。人間用の ID と同様に、ワークロード用の ID もマルチクラウド環境で指数関数的に増加しており、人間用の ID の増加率を圧倒的に上回ると予想されています。ワークロード ID は増え続け、自動化されることも多いため、組織にとってますます重要になるとともに管理するのが難しくなってきています。</p><p><strong>ゼロ トラスト (Zero Trust)</strong></p><p>デジタル資産のすべての層にわたって、すべてのトランザクションを明示的かつ継続的に検証する、プロアクティブで統合的なセキュリティのアプローチです。これらに加えて、最小限の特権を確認し、AI や高度な検出技術を活用しつつ脅威にリアルタイムに対応します。</p><p>※ <a href="https://query.prod.cms.rt.microsoft.com/cms/api/am/binary/RWSvP2">All stats taken from the 2021 State of Cloud Permissions Report</a></p><p>アクセス許可の管理についてより詳細を確認したい場合は、こちらの <a href="https://aka.ms/cloudknox">追加の資料</a> をご覧ください。よろしければ、弊社が提供するマルチクラウド用のアクセス許可管理ソリューションである CloudKnox Permissions Management もお試しください。<a href="https://ms.portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Overview">Azure AD にログオン</a> してパブリック プレビューにご参加ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 4 月 28 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft 365 Web アプリでアカウントの切り替えが可能に</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/announcing-account-switching-for-microsoft-365-web-apps/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/announcing-account-switching-for-microsoft-365-web-apps/</id>
    <published>2022-04-30T15:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.429Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2022 年 4 月 27 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/announcing-account-switching-for-microsoft-365-web-apps/ba-p/3290634">Announcing account switching for Microsoft 365 web apps!</a> を意訳したものになります。</p><p>不明点がありましたら、弊社サポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>本日、Micorosft 365 においてアカウントの切り替えが可能となったことをお知らせいたします。この機能についてはお客様より強いご要望いただいていたもので、サインアウトしてサインインしなおすのはもう不要となります。複数の Azure Active Directory カウント間で、もしくは複数の Microsoft アカウント間で、それかその組み合わせでも切り替えをご利用いただけます。</p><p><img src="/blog/azure-active-directory/announcing-account-switching-for-microsoft-365-web-apps/MultiIDAnimation.gif"></p><p>Office.com や Web 版の Word、Excel、PowerPoint、Outlook、OneDrive、SharePoint を含む Microsoft 365 Web アプリにてご自身でアカウントの切り替えをお試しいただけます。アカウントの切り替え機能についいて詳細を確認されたい場合は、Microsoft 365 チームが執筆した <a href="https://techcommunity.microsoft.com/t5/microsoft-365-blog/announcing-account-switching-for-microsoft-365-web-apps/ba-p/3290787">詳細なブログ記事</a> をご覧ください。</p><p>クリック一つでアカウントの切り替えができる機能は、Office デスクトップ アプリでもすでに利用可能です。Teams を含めて、今後より多くのデスクトップもしくはモバイル アプリでこの機能が提供される予定です。</p><p>フィードバックやご提案がありましたら、ぜひお知らせください。<a href="https://feedback.azure.com/forums/169401-azure-active-directory">Azure AD フィードバック フォーラム</a> まで投稿いただければと思います。</p><p>Alex Simons (Twitter: <a href="http://twitter.com/alex_a_simons">@Alex_A_Simons</a>)<br>Corporate Vice President of Program Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 4 月 27 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft が提供する包括的な ID 侵害のシグナルについて</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/holistic-compromised-identity-signals-from-microsoft/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/holistic-compromised-identity-signals-from-microsoft/</id>
    <published>2022-04-27T03:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.597Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 竜 です。</p><p>本記事は、2022 年 04 月 05 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/holistic-compromised-identity-signals-from-microsoft/ba-p/2365683">Holistic compromised identity signals from Microsoft</a> を意訳したものになります。</p><hr><p>皆さん、こんにちは。この度、Azure Active Directory (Azure AD) Identity Protection において、クラウド アプリケーションおよびエンドポイントにおける ID に対する脅威の検出領域をさらに拡大し、包括的な ID のリスク情報を強化するよう 4 つの新しい検出機能の一般提供を発表できることを嬉しく思っています。</p><p>新たに 4 件の検知機能の提供を始めました:</p><ul><li>OAuth を利用したアプリへの異常な「資格情報の追加」</li><li>機密ファイルへの大量のアクセス</li><li>プライマリ リフレッシュ トークン (PRT) へのアクセスの試行</li><li>ワークロード ID における漏洩した資格情報</li></ul><p>これらは、ワークロードとユーザーの ID を保護するために、Identity Protection が Microsoft Defender for Cloud Apps、Microsoft Defender for Endpoint、GitHub の脅威インテリジェンスを統合した素晴らしい例です。</p><p>これらの新しい検出機能により、Identity Protection が ID の侵害を検出し、シームレスに修復を開始できる範囲が広がりました。攻撃が持続し、その新奇性も増す中、検知と修復は一分一秒を争うものです。Azure AD 条件付きアクセスの「ユーザーまたはサービスプ リンシパルのリスク ポリシー」を利用することで、リスクが検知された際にユーザー アカウントを自動的に修復したり、サービス  プリンシパルをブロックしたりすることができます。これらの新しい検出機能により、ID の侵害を検出し、多様なシグナルを使用してシームレスに修復を開始する Identity Protection の機能が大幅に強化されます。 </p><h2 id="マイクロソフトの-Identity-Threat-インテリジェンス-エコシステムを理解する"><a href="#マイクロソフトの-Identity-Threat-インテリジェンス-エコシステムを理解する" class="headerlink" title="マイクロソフトの Identity Threat インテリジェンス エコシステムを理解する"></a>マイクロソフトの Identity Threat インテリジェンス エコシステムを理解する</h2><p>マイクロソフト社内の脅威検知のエコシステム、社外の研究者、法執行機関、および外部パートナーなどから脅威のインテリジェンス情報を統合することは、Identity Protection のリスク エンジンの中核をなす要素です。マイクロソフトのセキュリティ製品が新しい攻撃手法を検出し、既存の検出機能を改良していく中で、私たちは資格情報の侵害を特定するため、お客様にとって最も効果的な検出機能を今後も統合していくつもりです。今回発表した検知機能は、ユーザーやワークロードの ID リスクに影響するリスク検知機能として、Microsoft Defender for Endpoint、Microsoft Defender for Cloud Apps、およびパブリックな GitHub リポジトリからのシグナルを Identity Protection リスク検知機能として統合します。Identity Protection の新しいレポートと修正オプションにより、ID 管理者の作業が簡素化されます。</p><p><img src="/blog/azure-active-directory/holistic-compromised-identity-signals-from-microsoft/smoorhead_0-1649109507056.png"></p><p>また、より多様なシグナルを Identity Protection に統合するための作業も進めています。さらに、<a href="https://docs.microsoft.com/ja-jp/graph/api/resources/riskyuser?view=graph-rest-1.0">riskyUsers API</a> を介して Identity Protection に統合される サードパーティの ISV (Independent software vendors: 独立したソフトウェア ベンダー) や脅威検知の提供元も <a href="https://www.sentinelone.com/press/sentinelone-unveils-new-zero-trust-integration-for-microsoft-azure-active-directory/">続々と受け入れている</a> 状況です。これにより、Azure AD Identity Protection を利用中の顧客を持つサード パーティは、自身が保持する脅威のインテリジェンス情報に基づいて、ユーザー ID の侵害を検知する機能を構成可能となります。</p><h2 id="新しい検出機能から得られる価値"><a href="#新しい検出機能から得られる価値" class="headerlink" title="新しい検出機能から得られる価値"></a>新しい検出機能から得られる価値</h2><p>これらの新しい Microsoft の検出機能の利用は非常簡単に利用いただけます。Microsoft Defender for Endpoint と Microsoft Defender for Cloud Apps をすでにご利用の場合、これらの優れた検出機能は、自動的に Identity Protection に統合されます。これらの検出機能は、[リスク検出] レポートや、危険なユーザーまたはワークロード ID のユーザー履歴から確認することができます。機密ファイルへの大量のアクセスについても、異常なアクティビティを特定の認証リクエストと照合し、サインインの詳細を表示することができるため、「リスクあるサインイン」レポートから確認することができます。</p><p><img src="/blog/azure-active-directory/holistic-compromised-identity-signals-from-microsoft/smoorhead_1-1649109507066.png"></p><p><img src="/blog/azure-active-directory/holistic-compromised-identity-signals-from-microsoft/smoorhead_2-1649109507079.png" alt="&quot;リスク検出&quot; レポートの &quot;ユーザー検出&quot; と &quot;ワークロード ID 検出&quot; タブのフィルターに追加された新しい検出機能の一例"></p><p><img src="/blog/azure-active-directory/holistic-compromised-identity-signals-from-microsoft/smoorhead_3-1649109507090.png" alt="&quot;OAuth アプリへの異常な認証情報の追加 ‐ Microsoft Defender for Cloud Apps の検出機能の一例"></p><p>また、漏洩した資格情報に関して GitHub との連携も同様にスムーズに行われます。多くの組織では長い間、コード内に直接資格情報を埋め込む問題に悩まされてきました。この問題に対処するため、弊社では Identity Protection においてこれらの漏洩した資格情報の適用範囲を拡大し、GitHub 上の公開されたコードをその対象するとともに、<a href="https://jpazureid.github.io/blog/azure-active-directory/extend-the-reach-of-azure-ad-identity-protection-into-workload/">ワークロード ID 用の Identity Protection</a> により有効なシークレットにアラートを発するようにしました。GitHub は公開されているコードの中からシークレットをスキャンし、検証のためにその情報を Azure AD に送信します (各々のテナントにて本機能の設定をする必要はありません)。もしもシークレットが有効である場合は、Identity Protection はアカウントに対して「リスク検出」を生成し、そのシークレットのキー ID にアラートを上げます。生成された「リスク検出」は、[リスク検出] レポートから確認することができます。[追加の情報] (Additional Information) プロパティにあるリンクをクリックすると、漏洩した疑いのある認証情報が含まれる GitHub ファイルに移動することができます。Identity Protection が漏洩したとマークしたシークレットを削除することで、検出されたリスクが修復されます。</p><p><img src="/blog/azure-active-directory/holistic-compromised-identity-signals-from-microsoft/smoorhead_4-1649109507103.png" alt="GitHub 上に漏洩した資格情報を検出した際の Identity Protection &quot;リスク検出&quot; レポートの UX の一例"></p><p><img src="/blog/azure-active-directory/holistic-compromised-identity-signals-from-microsoft/smoorhead_5-1649109507112.png" alt="GitHub 上に漏洩したシークレットの一例"></p><p>Identity Protection のリスク データをプログラムから取得したり、独自の SIEM (Security Information and Event Management: セキュリティ情報およびイベント管理) にエクスポートなどされているお客様もいらっしゃると思いますので、これらのアクションを簡単に行えるようにしました。また、<a href="https://docs.microsoft.com/ja-jp/graph/api/resources/identityprotection-overview?view=graph-rest-beta&preserve-view=true">サービス プリンシパルのリスクのための API</a> および <a href="https://docs.microsoft.com/ja-jp/graph/api/resources/identityprotection-overview?view=graph-rest-1.0&preserve-view=true">ユーザー リスク検出のための API</a> を使用して、これら 4 つのリスク検出を照会することもできます。ほんの数クリックで、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/identity-protection/howto-export-risk-data">Azure AD 診断設定を構成</a> し、リスク データを Log Analytics ワークスペースやイベント ハブに転送したり、ストレージ アカウントにアーカイブしたり、あるいは SIEM ソリューションに送信したりすることが可能です。 </p><h2 id="次のステップ"><a href="#次のステップ" class="headerlink" title="次のステップ"></a>次のステップ</h2><p>弊社では、皆さまの組織の安全を守るためには、最大限包括的な ID 侵害のシグナルを取得することが重要であると認識しています。これらの新しいシグナルと Identity Protection の豊富な ID 脅威インテリジェンスを最大限に活用するには、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/workload-identity#create-a-risk-based-conditional-access-policy">リスクのあるサービス プリンシパル</a>、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/identity-protection/howto-identity-protection-configure-risk-policies">リスクのあるユーザーおよびリスクのあるサインイン ポリシー</a> を設定して、自動修復を行うことをお勧めします。Identity Protection は、Microsoft 社内およびパートナー企業のセキュリティ製品からのシグナルを統合し、最も正確で関連性の高い ID リスク エンジンを提供し続けていきます。</p><p>新しいシグナルと、セキュリティ製品全体の統合にご期待ください。そして、いつものように、皆さまのフィードバックをお待ちしています。(Twitter: @alex_t_weinert)</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 竜 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 04 月 05 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>テナント内の Azure AD デバイスの状態を素早く把握</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/understand-the-state-of-devices-across-your-organization/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/understand-the-state-of-devices-across-your-organization/</id>
    <published>2022-04-08T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.841Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2022 年 4 月 8 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/understand-the-state-of-devices-across-your-organization-in/ba-p/3118020">Understand the state of devices across your organization in seconds</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>こんにちは。</p><p>ゼロ トラストを用いたセキュリティへのアプローチを採用するには、リスクを十分に把握するために、組織全体を見通せる可視性を確保し、適切な制御をおこなうことが重要です。弊社では Azure AD 製品をご利用いただくうえでお客様が全体をスムーズに見渡せるように取り組んでおります。この度、この新しい方法として、デバイスの概要ブレードが GA となりましたことをお知らせしたいと思います。</p><p><img src="/blog/azure-active-directory/understand-the-state-of-devices-across-your-organization/pic.jpg"></p><p>デバイスの概要では、テナント全体でのデバイスの ID について主要な情報が表示されます。これにより、現在の状態を簡単に確認し、必要に応じて何らかの対応を取ることも可能です。この概要ページでは、テナント全体での非準拠のデバイスの数や使用されていないデバイスの数、アンマネージド デバイスの数が表示されますので、これらリスクのあるデバイスを通した攻撃から組織を守ることが可能です。このブレードでは、監視のタブより参加の方法や OS の種別ごとにデバイスの分類を確認でき、さらに監査ログの情報や関連するドキュメントにもアクセスが可能です。</p><p>デバイスの概要や、今回改善された機能をより活用したい場合は、こちらの <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/devices/device-management-azure-portal">ドキュメント</a> をご覧ください。この機能をお試しいただけましたら、感想についてもぜひ共有いただければ幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 4 月 8 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD RBAC - デバイス用のカスタム ロールと管理単位が利用可能に</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/azure-ad-rbac-custom-roles-amp-administrative-units-for-devices/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/azure-ad-rbac-custom-roles-amp-administrative-units-for-devices/</id>
    <published>2022-04-04T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.461Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 高田 です。</p><p>本記事は、2022 年 3 月 31 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/azure-ad-rbac-custom-roles-amp-administrative-units-for-devices/ba-p/3185209">Azure AD RBAC: Custom roles &amp; administrative units for devices now available</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>この一連のブログの最初の投稿で、<a href="https://jpazureid.github.io/blog/azure-active-directory/custom-roles-for-app-management-now-available/">アプリの管理を委任して行うためのカスタム ロールの一般的提供開始</a> について解説しました。今回、Azure Active Directory (Azure AD) のロールベースのアクセス制御 (RBAC) に関し、この続報として Azure AD でデバイス管理のきめ細かい委任を可能にするいくつかの新機能をご紹介いたします。これらの新機能を利用すると、以下のことが可能になります。</p><ul><li>デバイス オブジェクト用のアクセス許可を使用してカスタム ロールを作成する。</li><li>デバイスを管理単位のメンバーとして追加し、管理単位の範囲内でデバイスを管理するための組み込みまたはカスタムのロールを割り当てる。</li></ul><p>これらの新機能を使用してできることをいくつか見てみましょう。</p><p>以下の動画をご覧いただくことでも新機能をの動作をご確認いただけます。</p><p><a href="https://youtu.be/sQD_6f3rg0k">Device Management with Custom Roles and Administrative Unites (YouTube へのリンク)</a></p><h2 id="カスタムロールの作成"><a href="#カスタムロールの作成" class="headerlink" title="カスタムロールの作成"></a>カスタムロールの作成</h2><p>デバイスのアクセス許可を使用してカスタム ロールを作成するには、[ロールと管理者] に進み、[+ 新しいカスタム ロール] を選びます。この例では、”BitLocker Recovery Key Reader” という、BitLocker の回復キーを読み取るカスタム ロールを作成します。</p><p><img src="/blog/azure-active-directory/azure-ad-rbac-custom-roles-amp-administrative-units-for-devices/pic1.png"></p><p>ロールの名前と説明を入力します。次に、カスタムロール用の新しいデバイスのアクセス許可を使用して、このロール用に BitLocker のアクセス許可のみを選択します。</p><p><img src="/blog/azure-active-directory/azure-ad-rbac-custom-roles-amp-administrative-units-for-devices/pic2.png"></p><p>最後に [次へ] をクリックしてロールを作成します。これで他の不要なアクセス許可は付与せず、BitLocker 回復キーの読み取りだけを委任するカスタムロールを作成できました。</p><h2 id="管理単位にデバイスを追加する"><a href="#管理単位にデバイスを追加する" class="headerlink" title="管理単位にデバイスを追加する"></a>管理単位にデバイスを追加する</h2><p>ロールのアクセス許可をカスタマイズするだけでなく、管理単位を使用して、これらのアクセス許可を特定のデバイスのみに適用することも可能です。</p><p>以下の例では、”Service Department” という管理単位にデバイスが追加されています。[+ デバイスの追加] をクリックして、管理単位にデバイスを追加いただけます。</p><p><img src="/blog/azure-active-directory/azure-ad-rbac-custom-roles-amp-administrative-units-for-devices/pic3.png"></p><h2 id="カスタム-ロールと管理単位を組み合わせて使用する"><a href="#カスタム-ロールと管理単位を組み合わせて使用する" class="headerlink" title="カスタム ロールと管理単位を組み合わせて使用する"></a>カスタム ロールと管理単位を組み合わせて使用する</h2><p>次に、[ロールと管理者] に移動して、作成したカスタム ロールを管理単位のスコープに割り当てられます。これにより、ロールの作成時に指定した BitLocker のアクセス許可を管理単位の中にあるデバイスにだけ適用できるようになります。</p><p><img src="/blog/azure-active-directory/azure-ad-rbac-custom-roles-amp-administrative-units-for-devices/pic4.png"></p><p>注意: カスタムロールの割り当てにおいては、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/privileged-identity-management/pim-how-to-add-role-to-user#assign-a-role-with-restricted-scope">Privileged Identity Management の資格のある割り当て</a> を利用することを強くお勧めします。</p><p>以上になります！詳細については、<a href="https://aka.ms/customrolesdevices">カスタム ロール</a> もしくは <a href="https://aka.ms/adminunitsdevices">管理単位</a> のドキュメントもご覧ください。同様の機能については <a href="https://docs.microsoft.com/ja-jp/powershell/azure/active-directory/overview?view=azureadps-2.0-preview">PowerShell</a> と <a href="https://developer.microsoft.com/ja-jp/graph">Microsoft Graph API</a> からもご利用いただけます。</p><h2 id="今後の取り組み"><a href="#今後の取り組み" class="headerlink" title="今後の取り組み"></a>今後の取り組み</h2><p>Azure AD RBAC に関連して今後も素晴らしい機能の発表にご注目ください。今しがたフィードバックや提案がございましたらぜひお知らせください。<a href="https://feedback.azure.com/forums/169401-azure-active-directory?category_id=166032">Azure AD administrative roles のフォーラム</a> で共有いただければと思います。</p><p>Alex Simons (Twitter: <a href="https://twitter.com/Alex_A_Simons">@Alex_A_Simons</a>)<br>Corporate VP of Program Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 高田 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 3 月 31 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Salesforce で多要素認証が必須に - Azure AD 側での対応</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/salesforce-now-enforcing-multi-factor-authentication-azure-ad/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/salesforce-now-enforcing-multi-factor-authentication-azure-ad/</id>
    <published>2022-03-28T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.821Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 3 月 21 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/salesforce-now-enforcing-multi-factor-authentication-azure-ad/ba-p/2810644">Salesforce now enforcing multi-factor authentication—Azure AD has you covered</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>Salesforce が、Salesforce 製品へのアクセスに多要素認証 (MFA) の有効化を要求していることを受け、Azure Active Directory がどのようにこの要件へ対応できるかを紹介したいと思います。ハイブリッド ワークを実施している組織では、従業員がさまざまなアプリケーションを使用して仕事を行うため、Salesforce などのアプリケーションへのアクセスを確実に保護することが非常に重要です。  </p><p>Salesforce の新しい要件を満たし、Salesforce 製品へのアクセスを確実に保護する方法について、ID アライアンス チームのプリンシパル プログラム マネージャーである Jonathon Lyon が説明します。</p><hr><p>ハイブリッド ワークへの移行が進むにつれて、ファイアウォールやサイロ化、パスワードといった旧来のセキュリティ パラダイムが多くの組織を脆弱な状態にしています。攻撃者は、常にチャンスを探っており、企業ネットワークに侵入する最も早い方法の 1 つが ID であることに気づいています。ダークウェブ (闇サイト) には盗まれた認証情報が大量に出回っており、ID の窃取 (アカウントの乗っ取りやビジネス メールの漏洩など) は、ID 攻撃の最も一般的な形態となっています。最近のセキュリティ分析では、「ID は依然としてネットワークへのアクセスを行う際のカギとなる要素である。ID に対する攻撃や ID を使った攻撃が 2022 年に増加することは、間違いなく確実である」と言われています。 </p><p>あらゆる分野において、先進的な企業は、ボーダーレスなデジタル領域において脅威を迅速に検知し対応するためには、<a href="https://www.microsoft.com/ja-jp/security/business/zero-trust/">ゼロ トラスト</a> セキュリティが最良のアプローチであることを認識しています。<a href="https://security.salesforce.com/mfa">Salesforce</a> では、ゼロ トラストを念頭に置き、2022 年 2 月 1 日より、すべてのお客様が Salesforce 製品にアクセスする際に <a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/mfa-multi-factor-authentication">多要素認証 (MFA)</a> を有効にすることを義務付けると発表しています。<a href="https://www.microsoft.com/security/blog/2021/03/02/4-ways-microsoft-is-delivering-security-for-all-in-a-zero-trust-world/">すべての人にセキュリティを提供する</a> というマイクロソフトのミッションの一環として、Salesforce のお客様が <a href="https://azure.microsoft.com/ja-jp/services/active-directory/">Microsoft Azure Active Directory (Azure AD)</a> を使用して、MFA とシングル サインオン (SSO) を簡単に実現できるよう支援したいと思っています。</p><h1 id="パスワードの問題点"><a href="#パスワードの問題点" class="headerlink" title="パスワードの問題点"></a>パスワードの問題点</h1><p>15 万人以上の顧客と 2,000 億ドルを超える時価総額である Salesforce はセキュリティにおいて妥協が許されません。大手クラウド企業はもとよりいかなる企業においても、従業員の選んだ数桁の数字や文字に頼って企業全体を守るのはリスクが大きすぎるのです。<a href="https://jpazureid.github.io/blog/azure-active-directory/your-password-doesnt-matter/">パスワードは簡単にハッキングされます</a>。<a href="https://www.foodbusinessnews.net/articles/20118-oversight-committee-finds-minor-security-lapses-behind-jbs-cyberattack">米 JBS 社に対するランサムウェア攻撃</a> は、まさにこのような脆弱なパスワードで放置された管理者アカウントによって引き起こされ、最終的に 1,100 万ドルの損失となりました。この種の「ブルートフォース」攻撃は、2021 年 6 月に <a href="https://securityintelligence.com/news/credential-phishing-brute-force-attacks-increased-2021/">671% 増加</a> しました。実際、Azure AD は 2021 年 1 月から 12 月の間に、盗んだパスワードでのブルートフォース攻撃にて企業の顧客アカウントを乗っ取ろうとする試みを <a href="https://www.microsoft.com/security/blog/2022/02/03/cyber-signals-defending-against-cyber-threats-with-the-latest-research-insights-and-trends/">256 億回以上検知</a> し、ブロックしています。</p><p>マイクロソフトは、2021 年に <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/passwordless-authentication-is-now-generally-available/ba-p/1994700">パスワードレス サインインを一般的に商用利用可能</a> にすることで、パスワードを利用しない方法を提供しました。つまり、マイクロソフトの顧客はアカウントからパスワードを完全に削除し、代わりに以下を使用してサインインすることができるようになったのです:</p><ul><li><a href="https://www.microsoft.com/ja-jp/security/mobile-authenticator-app">Microsoft Authenticator アプリ</a>: このアプリにより iOS や Android の携帯電話を、パスワードなしの強力な資格情報として利用できます。ユーザーは、携帯電話に通知が届き、画面に表示された番号と照合することであらゆるプラットフォームやブラウザにサインインすることができます。生体認証 (指や顔) または PIN を使用して確認することも可能です。最近のアップデートにより、<a href="https://jpazureid.github.io/blog/azure-active-directory/microsoft-authenticator-app/?msclkid=af50f21cabb011ec950d24738a07b742">企業アカウントの追加や管理がより簡単</a> になりました。</li><li><a href="https://docs.microsoft.com/ja-jp/windows/security/identity-protection/hello-for-business/hello-overview">Windows Hello for Business</a>: 生体認証と PIN をユーザーの端末に直接結びつけて使用するため、所有者以外のアクセスを防ぐことができます。公開鍵基盤 (PKI) の統合と SSO のサポートにより、Windows Hello for Business を使用することでオンプレミスおよびクラウドの両方で企業リソースにシームレスにアクセスできるようになります。</li><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/howto-authentication-passwordless-security-key">FIDO2 セキュリティ キー</a>: クラウドまたはオンプレミスのリソース、およびサポートされているブラウザに対して SSO を提供します。FIDO2 セキュリティ キーは、携帯電話を第二要素として使用することに抵抗がある企業にとって最適なオプションです。</li></ul><h1 id="Azure-AD-を使用した多要素認証の実装"><a href="#Azure-AD-を使用した多要素認証の実装" class="headerlink" title="Azure AD を使用した多要素認証の実装"></a>Azure AD を使用した多要素認証の実装</h1><p>MFA は、<a href="https://www.microsoft.com/security/blog/2019/08/20/one-simple-action-you-can-take-to-prevent-99-9-percent-of-account-attacks/">ID 関連の攻撃を 99.9% 防ぐ</a> ことが証明されています。それにも関わらず、2021 年末までに MFA を導入済みの Azure AD のお客様はわずか 22% に過ぎません。MFA のきっかけとなる <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/conditional-access/overview">条件付きアクセス</a> は、ID を中心とした制御の中核として Azure AD に直接組み込まれており、様々な情報をまとめることで組織のポリシーを即時に適用します。</p><p>Microsoft のお客様は Azure AD を使用して、生体認証、Authenticator アプリ、SMS テキスト、通話、ワンタイム パスコードなど、数ある認証方法の中から選択し、Salesforce やその他のアプリケーションの認証を行うことができます。(<strong>注:</strong> <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/it-s-time-to-hang-up-on-phone-transports-for-authentication/ba-p/1751752">音声とテキストは最も安全性が低い</a> ため、Salesforce では SMS や電話による認証は許可されていません)。Azure AD と Salesforce を統合して SSO と MFA を実現すると、以下のようなことが可能になります:</p><ul><li>Salesforce にどのユーザーがアクセス可能かを Azure AD で制御</li><li>Azure AD アカウントを使用してユーザーが自動的に Salesforce にサインインできるように構成</li><li>両方のアカウントを、<a href="https://azure.microsoft.com/ja-jp/features/azure-portal/">Microsoft Azure ポータル</a> で一元管理</li><li>Salesforce アプリケーションに MFA を適用する条件付きアクセス ルールを作成</li></ul><p>Azure AD で MFA を有効にする方法の詳細については、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/tutorial-enable-azure-mfa">チュートリアル</a> を参照ください。</p><h1 id="Salesforce-の多要素認証-設定手順"><a href="#Salesforce-の多要素認証-設定手順" class="headerlink" title="Salesforce の多要素認証 - 設定手順"></a>Salesforce の多要素認証 - 設定手順</h1><p>Salesforce は要件となる期限 (日付は製品によって異なります) を迎えると、同社の <a href="https://help.salesforce.com/s/articleView?language=en_US&type=1&id=000362737">実施ロードマップ</a> に従って、管理者が MFA を無効にするためのコントロールを削除することによって要件の実施を開始します。現時点で Salesforce は、この新しい要件を契約上のみで実施しています。つまり、MFA を有効にしないお客様は契約を更新することができなくなります。技術的な強制はその後に行われる可能性があります。</p><p>新しい要件を満たすために、Salesforce のお客様は以下のいずれかを行う必要があります。</p><ul><li>Salesforce の画面から MFA を有効にする、もしくは… </li><li>Salesforce 製品へのアクセスには、<a href="https://www.microsoft.com/ja-jp/security/business/identity-access-management/single-sign-on">SSO</a> を使用する。Azure AD は、Salesforce やその他多くのアプリケーションへユーザーを自動的に認証できます (以下の「Salesforce で MFA を有効にするクイック手順」を参照ください)。</li></ul><p>また、お客様は <a href="https://security.salesforce.com/mfa-requirement-check">Salesforce MFA 要件チェッカー</a> を使用して、実装が要件を満たしていることを確認することもできます。併せて、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/concept-authentication-methods">Azure AD で利用可能な認証および検証方法</a> についてもご確認ください。 </p><p>以下では、Salesforce ユーザーに MFA を適用する条件付きアクセス ポリシーの作成手順をご紹介します。</p><ol><li>テナントの <strong>グローバル管理者</strong> として <strong>Azure ポータル</strong> にサインインします。</li><li><strong>Azure Active Directory</strong> を選択し、<strong>管理</strong> 配下の <strong>セキュリティ</strong> を選択します。</li><li><strong>条件付きアクセス</strong> を選択します。</li></ol><p><img src="/blog/azure-active-directory/salesforce-now-enforcing-multi-factor-authentication-azure-ad/image01.jpg"></p><ol start="4"><li><strong>新しいポリシー</strong> をクリックし、<strong>新規ポリシーの作成</strong> を選択します。</li></ol><p><img src="/blog/azure-active-directory/salesforce-now-enforcing-multi-factor-authentication-azure-ad/image02.jpg"></p><ol start="5"><li><strong>ポリシーの名前を入力</strong> します。</li></ol><p><img src="/blog/azure-active-directory/salesforce-now-enforcing-multi-factor-authentication-azure-ad/image03.jpg"></p><ol start="6"><li><strong>割り当て</strong> 配下の、<strong>ユーザーまたはワークロード ID</strong> を選択します。</li><li><strong>ユーザーとグループ</strong> を選択します。次に Salesforce を使用するユーザ、またはユーザのグループを選択します。必要なユーザーまたはグループを選択したら、<strong>選択</strong> をクリックします。</li></ol><p><img src="/blog/azure-active-directory/salesforce-now-enforcing-multi-factor-authentication-azure-ad/image04.jpg"></p><ol start="8"><li><strong>クラウド アプリまたは操作</strong> を選択します。</li><li><strong>アプリを選択</strong> を選択し、Salesforce を検索します。<strong>選択</strong> をクリックします。(必要に応じて条件を指定することもできますが、この例では条件のままにしておきます)。</li></ol><p><img src="/blog/azure-active-directory/salesforce-now-enforcing-multi-factor-authentication-azure-ad/image05.jpg"></p><ol start="10"><li><strong>アクセス制御</strong> で <strong>許可</strong> を選択します。</li><li><strong>アクセス権の付与</strong> を選択し、<strong>多要素認証を要求する</strong> オプションにチェックを入れます。そして、<strong>選択</strong>をクリックします。</li></ol><p><img src="/blog/azure-active-directory/salesforce-now-enforcing-multi-factor-authentication-azure-ad/image06.jpg"></p><p>最後のステップは、ポリシーを有効にすることです。</p><ol start="12"><li><strong>ポリシーの有効化</strong> を <strong>レポート専用</strong> から <strong>オン</strong> に変更します。次に、<strong>作成</strong> をクリックします。</li></ol><p><img src="/blog/azure-active-directory/salesforce-now-enforcing-multi-factor-authentication-azure-ad/image07.jpg"></p><p>このルールが有効になると、選択したすべてのユーザーが Salesforce にサインインする際に MFA を使用するようになります。</p><p><strong>注</strong>: 初めて条件付きアクセス ポリシーを作成する場合、次のようなメッセージが表示されることがあります。</p><p><img src="/blog/azure-active-directory/salesforce-now-enforcing-multi-factor-authentication-azure-ad/image08.jpg" alt="条件付きアクセス ポリシーは、セキュリティ既定値群を置き換えるため、事前にセキュリティの既定値群を無効にする必要があります。"></p><p>以下の手順で、セキュリティの既定値群を無効にします。</p><ol><li>セキュリティ管理者、条件付きアクセス管理者、またはグローバル管理者として、<strong>Azure ポータル</strong> にサインインします。</li><li><strong>Azure Active Directory</strong> &gt; <strong>プロパティ</strong> を参照します。</li><li><strong>セキュリティ既定値群の管理</strong> を選択します。</li><li><strong>セキュリティ既定値群の有効化</strong> を <strong>いいえ</strong> に設定します。</li><li><strong>保存</strong> を選択します。</li></ol><p><img src="/blog/azure-active-directory/salesforce-now-enforcing-multi-factor-authentication-azure-ad/image09.jpg"></p><h1 id="すべてのアプリケーションにシームレスにサインイン"><a href="#すべてのアプリケーションにシームレスにサインイン" class="headerlink" title="すべてのアプリケーションにシームレスにサインイン"></a>すべてのアプリケーションにシームレスにサインイン</h1><p>Azure AD は MFA を提供するだけではなく、すべてのユーザーが場所やデバイスを問わず、以下を含めて安全かつシームレスにアクセスできるようにします:</p><ul><li>一元化されたユーザー ポータルによりアプリ展開作業を単純化</li><li>Identity Protection と条件付きアクセスによる、リスク ベースのアクセス ポリシーの強力な適用</li><li>自動化されたプロビジョニング ワーク フローとセルフ サービス ツールによる IT コストの削減 </li></ul><p>Azure AD は、<strong>Adobe、AWS、Dropbox、SAP Concur、ServiceNow</strong> など、広く利用されている他のアプリケーションとの統合を容易に実現します。<a href="https://azure.microsoft.com/ja-jp/services/active-directory/sso/#overview">Azure Active Directory のシングル サインオン</a> により、<strong>Salesforce</strong> をはじめとする多くのエンタープライズ　アプリケーションでシンプルかつ安全な MFA を実現し、信頼性と拡張性の高い ID  サービスにアクセスが可能となります。</p><p>ご参考: <a href="https://www.securityweek.com/cyber-insights-2022-identity">Security Week Cyber Insights 2022: Identity</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 3 月 21 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>スマホを替える時は、Microsoft Authenticator の移行を忘れないでください！</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/move-authenticator-to-new-phone/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/move-authenticator-to-new-phone/</id>
    <published>2022-03-24T03:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.733Z</updated>
    
    <content type="html"><![CDATA[<div class="alert is-info"><p class="alert-title">Note</p><p>検索キーワード : Offce 365 / Microsoft 365 / Azure AD / Azure Active Directory / Multi Factor Authentication / MFA / 多要素認証 / 変更 / 買い替え / Microsoft Authenticator / アカウント / ロックアウト / サインインできない / ログインできない / サインイン要求を承認</p></div><p>こんにちは。Azure Identity チームの栗井です。</p><p>Microsoft のクラウド サービスを利用しているすべての人々にお願いです。<strong>スマートフォンを替える時は、Microsoft Authenticator (以下 MS Authenticator) の移行を忘れないでください！</strong> </p><p>※ 加えて、末尾の <strong>まとめ : スマートフォン移行にあたっての注意点</strong> に記載の注意事項も一読ください。</p><h2 id="よくあるお問い合わせ"><a href="#よくあるお問い合わせ" class="headerlink" title="よくあるお問い合わせ"></a>よくあるお問い合わせ</h2><p>「スマートフォンを替えたところ、下記画面で要求される多要素認証 (以下 MFA) を完了することができなくなってしまいました。<br>おそらく、以前のスマートフォン宛に要求が送信されているのだと思います。どうやったら新しい端末で MFA ができるようになりますか？」</p><p><img src="/blog/azure-active-directory/move-authenticator-to-new-phone/mfa-required.png"></p><h2 id="原則-古い端末を破棄する前に、かならず新しい端末への移行作業をしてください"><a href="#原則-古い端末を破棄する前に、かならず新しい端末への移行作業をしてください" class="headerlink" title="原則 : 古い端末を破棄する前に、かならず新しい端末への移行作業をしてください"></a>原則 : 古い端末を破棄する前に、かならず新しい端末への移行作業をしてください</h2><p>新しい端末への移行作業を忘れていると、MFA を完了できずに、Office 365 や Azure ポータルなどに入れなくなってしまう恐れがあります。そのため、新しい端末に移行する際は、すみやかに MS Authenticator の移行を実施ください。</p><p>移行作業の大まかな手順は下記の通りです。</p><h3 id="MS-Authenticator-の移行方法"><a href="#MS-Authenticator-の移行方法" class="headerlink" title="MS Authenticator の移行方法"></a>MS Authenticator の移行方法</h3><ol><li><p>任意の端末 (PC 端末が見やすいです) で <a href="https://aka.ms/mfasetup">https://aka.ms/mfasetup</a> にアクセスします。</p></li><li><p>登録済みの MFA の方法一覧が表示されます。<br><img src="/blog/azure-active-directory/move-authenticator-to-new-phone/mysecurityinfo-before.png"></p></li><li><p>[+ 方法の追加] を押下します。画面の指示に従って、新しいスマートフォンの MS Authenticator をセットアップします。<br><img src="/blog/azure-active-directory/move-authenticator-to-new-phone/mfa-setup.png"></p></li><li><p>新しいスマートフォンが一覧に追加されます。<br><img src="/blog/azure-active-directory/move-authenticator-to-new-phone/mysecurityinfo-after.png"></p></li><li><p>以前のスマートフォンは不要になったら、上記の一覧から削除しましょう。</p></li></ol><h2 id="もし移行作業を忘れてしまったら"><a href="#もし移行作業を忘れてしまったら" class="headerlink" title="もし移行作業を忘れてしまったら ?"></a>もし移行作業を忘れてしまったら ?</h2><p>移行作業を忘れたまま以前の端末をリセット・破棄してしまった場合、前述の &lt;MS Authenticator の移行方法&gt; が実施できません。なぜなら <a href="https://aka.ms/mfasetup">https://aka.ms/mfasetup</a> にサインインする際に、既存の方法による MFA が要求されるためです。</p><p><img src="/blog/azure-active-directory/move-authenticator-to-new-phone/mfasetup-lockout.png"></p><p>このような場合の回避策は下記の通りです。</p><ul><li><p>回避策 1 : MS Authenticator 以外の方法 (SMS、音声通話 等) で MFA を完了</p><p>MS Authenticator 以外の方法で MFA が可能な場合、<a href="https://aka.ms/mfasetup">https://aka.ms/mfasetup</a> へ問題なくアクセスが可能です。前述の &lt;MS Authenticator の移行方法&gt; の手順でご対応ください。</p><p><img src="/blog/azure-active-directory/move-authenticator-to-new-phone/mfa-anothermethod.png"></p></li><li><p>回避策 2 : 社内の管理者に依頼して、MFA のリセットを依頼</p><p>管理者アカウントを持つユーザーに、自身の MFA をリセットしてもらうよう依頼してください。</p></li><li><p>回避策 3 (最終手段) : マイクロソフトに MFA の一時解除を依頼</p><p>回避策 1 と 2 の両方が実施不可能な場合、具体的には下記のすべてを満たすような場合には、お客様側での対処策が無く、マイクロソフトのデータセンター側での対応が必要になります。対応完了には数営業日いただくことになりますので、予めご了承ください。</p><ul><li>MS Authenticator 以外の方法での MFA が構成されていない</li><li>テナント唯一の全体管理者</li><li>Azure ポータルにアクセスする際にも MFA が求められる</li></ul></li></ul><p>各回避策の詳細については <a href="https://jpazureid.github.io/blog/azure-active-directory/change-mfa-verification-method/">別記事 「MFA 認証方法を、変更 / 再登録 / 追加 したい！」</a> をご確認ください。</p><h2 id="まとめ-スマートフォン移行にあたっての注意点"><a href="#まとめ-スマートフォン移行にあたっての注意点" class="headerlink" title="まとめ : スマートフォン移行にあたっての注意点"></a>まとめ : スマートフォン移行にあたっての注意点</h2><p>上記の内容をふまえて、下記の 3 つの注意事項にご留意ください。</p><ol><li>【最重要】 スマートフォンを替える時は、MS Authenticator の移行を忘れないでください！</li></ol><ol start="2"><li>MFA の方法は、あらかじめ複数登録しておくと安心です<ul><li>もし MS Authenticator の移行を忘れてしまった場合でも、SMS 等による MFA が可能であれば、前述の回避策がご利用いただけます。</li></ul></li><li>【管理者向け】テナントに、複数の管理者を用意しておきましょう。<ul><li>上記の 1 と 2 が満たされていない場合でも、管理者のアカウントによって、当該ユーザーの MFA をリセットすることができるためです。なお、管理者自身が MS Authenticator の移行を忘れてしまった時のために、管理者は複数いることが望ましいです。</li></ul></li></ol><h2 id="関連情報"><a href="#関連情報" class="headerlink" title="関連情報"></a>関連情報</h2><ul><li><a href="https://jpazureid.github.io/blog/azure-active-directory/change-mfa-verification-method/">MFA 認証方法を、変更 / 再登録 / 追加 したい！ | Azure AD サポート チーム ブログ</a></li><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/concept-mfa-howitworks">Azure AD Multi-Factor Authentication | Microsoft Docs</a></li><li><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/concept-mfa-licensing">Azure AD Multi-Factor Authentication の機能とライセンス | Microsoft Docs</a></li></ul><h2 id="編集後記"><a href="#編集後記" class="headerlink" title="編集後記"></a>編集後記</h2><p>ありがたいことに、昨今では数多くの組織・学校のお客様によって、多要素認証 (MFA) を導入のうえ、MS Authenticator をご活用いただいております。</p><p>一方で、<strong>スマートフォンを替える場合、MS Authenticator の移行が必要である</strong>という事実は、まだあまり多くのユーザーの方にご認識いただけていない現状があります。</p><p>MS Authenticator の移行を忘れて、各種サービスにアクセスできなくなってしまうことによる業務影響は、お客様によってはかなり深刻です。大事なプレゼンテーションの直前に PowerPoint が開けなくなってしまったら ? 取引先に緊急の連絡が必要なのに、Outlook に入れなくなってしまったら ?</p><p>怖がらせるような例ばかりを並べてしまってすみません。しかしいずれも起こりうることです。</p><p>「そのようなリスクがあるのなら、MFA 自体を無効化してしまおう !」、そう考える管理者の方いらっしゃるかもしれません。しかしこれは、セキュリティ性を大きく損ねることになるので、お勧めすることができません。<br>ベスト プラクティスは MFA を利用しつつ、ユーザーの方には前述の「まとめ : スマートフォン移行にあたっての注意点」にご留意いただくことです。</p><p>そのため、もしこのブログ記事を読んでくださっている方の中で、社内の情報システム部門の方がいらっしゃれば、社内ポータルや配布資料などに、このブログ記事の URL をご記載いただけますと嬉しいです。</p><p>本記事の Twitter や facebook 等の SNS へのシェアも大歓迎です。<a href="https://feedback.azure.com/d365community/">Microsoft Azure のフィードバックサイト</a> へのご意見もお待ちしております。</p><p><strong>スマートフォンを替える場合、MS Authenticator の移行が必要である</strong> ということを、もっと多くのご利用者の方にご認識いただけるよう、弊社としても引き続き情報発信を進めて参ります。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;alert is-info&quot;&gt;&lt;p class=&quot;alert-title&quot;&gt;Note&lt;/p&gt;&lt;p&gt;検索キーワード : Offce 365 / Microsoft 365 / Azure AD / Azure Active Directory / Multi</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="MFA" scheme="https://jpazureid.github.io/blog/tags/MFA/"/>
    
    <category term="Multi Factor Authentication" scheme="https://jpazureid.github.io/blog/tags/Multi-Factor-Authentication/"/>
    
  </entry>
  
  <entry>
    <title>認証プロンプト分析ワークブックを使用して余分なプロンプトを削減する</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/</id>
    <published>2022-03-24T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.801Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure Identity サポート チームの小出です。</p><p>本記事は、 2022 年 3 月 3 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/reducing-extra-prompts-with-the-authentication-prompt-analysis/ba-p/2810647">Reducing Extra Prompts with the Authentication Prompt Analysis Workbook</a> を意訳したものになります。ご不明点などございましたら、サポート チームまでお問い合わせください。</p><hr><p>最新の Azure AD ワークブック「認証プロンプトの分析」をご紹介します！これまでのワークブックについての情報は、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/reports-monitoring/howto-use-azure-monitor-workbooks">Azure Active Directory レポートに Azure Monitor ブックを使用する方法</a> でご覧いただけます。もし Log Analytics を使用するようにログをまだセットアップしていない場合は、チュートリアルの <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/reports-monitoring/tutorial-log-analytics-wizard">チュートリアル: Log Analytics ワークスペースを構成する</a> を利用いただけます。その後、さらにこの新しいワークブックを読んで、利用可能なさまざまなデータセットについて学ぶとともに、余分なプロンプトを減らしてエンドユーザー体験を向上させる方法について知見を得ていただけたらと思います。</p><p>Inbar と Corissa より詳細を説明いたします。</p><hr><p>こんにちは、Inbar Cizer Kobrinsky です！今回は、Corissa Koopmans と一緒に、最新の Azure AD ワークブック <strong>「認証プロンプト分析」</strong> を紹介します。このワークブックで利用できるさまざまなデータセットを紹介し、余分なプロンプトを減らすことによって、エンド ユーザー体験を向上させる方法について、いくつか知見を紹介いたします。</p><h2 id="余分なプロンプトに着目する理由"><a href="#余分なプロンプトに着目する理由" class="headerlink" title="余分なプロンプトに着目する理由"></a>余分なプロンプトに着目する理由</h2><p>ワークブックの詳細に入る前に、お客様の環境でサイバー攻撃をシミュレートしたお客様事例を紹介したいと思います。まず、簡単なパスワード スプレー攻撃を行い、組織において脆弱で簡単に推測できるパスワードをすべて探し出しました。そして、これらのユーザーに MFA のプロンプトを大量に要求し、ユーザーがどのように反応するかを確認しました。念のため、この会社では経営陣の承認を得てこれらの対応を実施しておりますので心配は無用です。</p><p>驚いたことに、このような予期せぬプロンプトが表示されたことを報告したユーザーは皆無でした。さらに悪いことに、多くのユーザーが、自分が MFA を開始したわけではないのに、それをよく理解せず、MFA プロンプトを盲目的に承認していたのです。あるユーザーは、嫌気がさしたのか Authenticator アプリを完全にアンインストールしてしまいました。</p><p>サイバー攻撃のシミュレーション以外に、ユーザーに過剰なプロンプトが表示される場合としては、アプリケーションの設定ミスや過度に多くの認証プロンプトを表示するポリシーが原因と考えられます。過剰にプロンプトを表示するとユーザーの生産性に影響を与えますし、しばしばユーザーが自分では開始しなかった MFA プロンプトを承認してしまうことにつながります。誤解のなきよう、MFA は非常に重要なものです！MFA を求めるべきかどうかという話をしているのではなく、どの程度の頻度でユーザーに MFA を求めるべきかという話をしているのです。</p><p>それでは、新しいワークブックとそれを使ってテナント内のプロンプトを分析する方法について説明していきたいと思います。例となるお客様環境を見ながら説明していきます。</p><h3 id="認証方法"><a href="#認証方法" class="headerlink" title="認証方法"></a>認証方法</h3><p>まずお客様の環境で、どのような種類の認証が、どのようなデバイスから行われているかを把握することから始めましょう。このためには、最初のデータのグラフである「認証方法別の認証プロンプト」を見ることになります。</p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook1.png"></p><p>まずは、組織内のユーザーがどのような認証方法を使用しているか、その利用状況は思っていたとおりかどうかという点をご確認ください。この例のお客様は、プロンプトを減らし、エンドユーザー体験を向上させるために、認証の二要素目として Authenticator アプリを使用するようにユーザーを促しています。Authenticator アプリを使用することで、どのようにモバイル デバイスのプロンプトを減らすことができるかについては、PRT に関するこの <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/devices/concept-primary-refresh-token">詳細な記事</a> をお読みください。  </p><p>ヒント: 電話ベースの方法から Authenticator アプリにユーザーを移行させるには、Microsoft Authenticator をセットアップするようユーザーを誘導ください。<br>詳細情報: <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/how-to-mfa-registration-campaign">https://aka.ms/nudge</a></p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook2.png"></p><p>MFA プロンプトを減らすもう一つの方法は、<a href="https://docs.microsoft.com/ja-jp/windows/security/identity-protection/hello-for-business/hello-overview">Hello for Business</a> や FIDO2 など、サインイン時に <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/concept-authentication-passwordless">パスワードレスの認証方式</a> に移行することです。ユーザーがテナントでどのような認証方法を登録しているかを確認するには、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/howto-authentication-methods-activity">Authentication Methods insights ダッシュボード</a> を使用ください。実体が想定と異なる状態であれば、このダッシュボードをベースにさらに調査するのがおすすめです。</p><h3 id="デバイス"><a href="#デバイス" class="headerlink" title="デバイス"></a>デバイス</h3><p>次の 2 つのグラフは、環境で使用されているデバイスに焦点を当てたものです。最初の図は、1 時間に何件の認証がどの OS から行われているかを示しています。ワークステーションや携帯電話で不要なプロンプトが表示されていないかどうか、どこから手を付ければユーザー体験を最も改善できるか判断するのに役立つはずです。また、古い OS のデバイス (前回のアップグレードで見落してしまったもの) があるかどうかを確認するのにも良い方法です。</p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook3.png"></p><p>これらのデータから、1 時間あたりのプロンプトのほとんどは、携帯電話ではなくワークステーションから発生していることがわかります。また、いくつかの Windows 8 マシンが、企業向け Windows 10 ビルドに正しくアップグレードされていないようです。この点も対応する必要があります。携帯電話からの認証が多かった場合、先に述べたように、Authenticator アプリを使用することでこれらのプロンプトを削減することが可能です。しかし、この例では Windows ワークステーションに着目しますので、次の図に移りましょう。</p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook4.png"></p><p>「デバイスの状態ごとの認証プロンプト」の画面では、Azure AD 参加デバイス、ハイブリッド Azure AD Join デバイス、Azure AD 登録デバイス、または Azure AD にとって不明な (管理されていない) デバイスがそれぞれどれだけのプロンプトに関連しているか表示されます。</p><p>上のグラフでは、プロンプトの大部分は管理されていないデバイスによるものであることがわかります。<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/devices/hybrid-azuread-join-plan">Azure AD Join と Hybrid Azure AD Join</a> を実装することで、デバイスが Azure AD Primary Refresh Token (PRT) を持つようになるため、お客様は追加の MFA プロンプトを劇的に削減することができます。これは、Authenticator アプリがモバイルでプロンプトを減らすことができるのと同じです。 </p><p>全体的な認証のビューと、デバイス観点で認証体験の状況を確認する方法は以上となります。次に、「ユーザーごとの認証プロンプト」のデータより、ユーザー観点で情報を見てみましょう。</p><h3 id="ユーザー"><a href="#ユーザー" class="headerlink" title="ユーザー"></a>ユーザー</h3><p>他のビューと同様に、このユーザー ビューでは、期間内に行われたプロンプトがユーザーの観点から表示されます。見てわかるように、これらの数字の一部は予想どおりです。しかし、予想以上に多くのプロンプトが求められているユーザーが数名いるため、さらに調査を行う必要があります。 </p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook5.png"></p><p>少し下にスクロールすると、プロンプトが最も多かったユーザーの概要と、アプリケーションやタイムスタンプ、リクエスト ID など、トラブルシューティングのための追加情報が表示されます。 参考として、全ユーザーのプロンプト数の平均値と中央値も表示されます。このリストの上位ユーザーは、ユーザー体験が良くない可能性が高い状況です。これは通常、何かが間違って設定されているか、またはアカウントが攻撃を受けていることが原因です。いずれにせよ、調査が必要であり、対策を講じる必要があります。  </p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook6.png"></p><h3 id="アプリケーション"><a href="#アプリケーション" class="headerlink" title="アプリケーション"></a>アプリケーション</h3><p>アプリケーションの設定が間違っていると、認証に失敗し続け、最終的にプロンプトの数が非常に多くなることがあります。 このことを念頭に置いて、プロンプトの割合が異常に高いアプリケーションに注目ください。多くのお客様にとって、最も使用しているアプリケーションはビジネス生産性アプリケーションでしょう。想定と異なるものがあれば、調査の必要があります。  </p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook7.png"></p><h3 id="認証プロセスの詳細"><a href="#認証プロセスの詳細" class="headerlink" title="認証プロセスの詳細"></a>認証プロセスの詳細</h3><p>サインインごとに、OAUTH のスコープ、認証ライブラリの種類、IP アドレス、レガシー TLS の有無、CAE (継続的アクセス評価) など、認証プロセスの詳細が記載されています。また、1 つのサインインに複数のプロセスが含まれる場合があることにも注意が必要です。</p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook8.png"></p><p>このデータは、TLS 1.0/1.1 および 3DES が廃止された際に、レガシー TLS のトラブルシューティングや環境内の検索に役立つはずです。詳しく知りたい方は <a href="https://docs.microsoft.com/ja-jp/troubleshoot/azure/active-directory/enable-support-tls-environment?tabs=azure-monitor&WT.mc_id=Portal-fx">Azure AD TLS 1.1 および 1.0 の非推奨の環境で TLS 1.2 のサポートを有効にする</a> をご確認ください。</p><h3 id="認証ポリシー"><a href="#認証ポリシー" class="headerlink" title="認証ポリシー"></a>認証ポリシー</h3><p>Azure AD には、ユーザーに MFA を要求できる複数のポリシーがあります。例えば、条件付きアクセス、ユーザーごとの MFA、セキュリティの既定値群からユーザーに MFA の実行を要求することができます。ユーザーが MFA を要求されるあまり知られていない方法としては、アクセスのためにアプリが MFA を要求する場合です (ID プロバイダーではなく、Relying party によって強制される)。例えば、ユーザーがセキュリティ情報を更新しに行く場合、毎回 MFA が要求されます。以下のグラフは、テナントでユーザーに MFA を強制する想定外のポリシーがあるかどうかを確認するのに役立ちます。</p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook9.png"></p><h3 id="推薦事項とワークブックのヒント"><a href="#推薦事項とワークブックのヒント" class="headerlink" title="推薦事項とワークブックのヒント"></a>推薦事項とワークブックのヒント</h3><p>最後に、ユーザー体験を向上させ、プロンプトを減らすための 4 つの方法を以下に示します。例えば、Authenticator アプリ以外の方法を使用しているモバイル デバイスの認証プロンプトを特定することが可能です。</p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook10.png"></p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook11.png"></p><p>ワークブックの最後のヒントとして、ワークブックの最上部よりフィルタリングをより細かく設定することができます。認証要求の多い特定のユーザーをフィルタリングしたり、サインインに失敗したアプリケーションのみを表示したりすることで、新たな発見を得て、引き続き解決に取り組むことができます。 </p><p><img src="/blog/azure-active-directory/reducing-extra-prompts-with-authentication-prompt-analysis-workbook/reducing-extra-prompts-with-authentication-prompt-analysis-workbook12.png"></p><p>詳しくは、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/concepts-azure-multi-factor-authentication-prompts-session-lifetime">再認証プロンプトを最適化し、Azure AD Multi-Factor Authentication のセッションの有効期間について理解する</a> をお読みになることをお勧めします。</p><p>このワークブックにより貴重な洞察が得られたり、貴社の組織でプロンプトを削減するのに役立てられたりすれば幸いです。このワークブックに関するご意見、ご感想がありましたら、この <a href="https://forms.office.com/pages/responsepage.aspx?id=v4j5cvGGr0GRqy180BHbR-Fe8yfx1zBKhEr1JlI5HMlUNUc4M1BEM0I5SThDWVM3QldESVhZU09TWC4u">簡単なアンケート</a> にお答えください。  </p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure Identity サポート チームの小出です。&lt;/p&gt;
&lt;p&gt;本記事は、 2022 年 3 月 3 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD RBAC でアプリ管理用のカスタム ロールが利用可能になりました</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/custom-roles-for-app-management-now-available/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/custom-roles-for-app-management-now-available/</id>
    <published>2022-03-19T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.565Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、 Azure Identity サポート チームの小出です。</p><p>本記事は、 2022 年 3 月 2 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/azure-ad-rbac-custom-roles-for-app-management-now-available/ba-p/3185206">Azure AD RBAC: Custom roles for app management now available</a> を意訳したものになります。ご不明点などございましたら、サポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>Azure Active Directory (Azure AD) のロールベースのアクセス制御 (RBAC) に関連する機能について、一連の発表ができることをとても嬉しく思っています。これらの機能は、Azure AD と Microsoft 365 の RBAC において、きめ細かな権限付与の実現をサポートし、大規模環境での管理をよりシンプルにするものです。</p><p>このシリーズではまず、アプリ管理を委任するためのカスタム ロールの一般提供 (GA) について紹介したいと思います。  </p><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/roles/custom-enterprise-app-permissions">アプリの登録</a> と <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/roles/custom-available-permissions">エンタープライズ アプリ</a> のカスタム ロールを合わせて使用することで、管理者がアプリ管理のために持つアクセス権をきめ細かく制御することができます。なお、Azure AD のカスタム ロールを利用するには、Azure AD Premium P1 ライセンスが必要です。  </p><p>ここでは、架空の会社 Woodgrove の IT 管理者である Alice が、どのように効果的かつ安全にアプリの管理を委任できるか見てみましょう。</p><h2 id="Woodgrove-社ではアプリ管理用のカスタム-ロールを使用して安全なアプリ管理の委譲を実現"><a href="#Woodgrove-社ではアプリ管理用のカスタム-ロールを使用して安全なアプリ管理の委譲を実現" class="headerlink" title="Woodgrove 社ではアプリ管理用のカスタム ロールを使用して安全なアプリ管理の委譲を実現"></a>Woodgrove 社ではアプリ管理用のカスタム ロールを使用して安全なアプリ管理の委譲を実現</h2><p>地理的に分散した組織である Woodgrove は、小規模な IT チームが Azure AD のロールの委任を集中的に管理しています。シニア IT 管理者の Alice は、IT システムを安全に保つために、最小限の権限を行使して Azure AD のロールを委任する責任を負っています。</p><p>Charlie は、Woodgrove が持つ多くの LOB (Line of Business) アプリケーションの 1 つである 「Woodgrove Portal アプリ」の所有者です。Alice は、LOB アプリケーションのアクセス管理を所有者に委任したいと考えています。具体的には、Charlie にロールを付与し、Charlie が Woodgrove Portal アプリへのアクセスを管理できるようにしたいのです。  </p><p>Alice がこのシナリオのために新しいカスタム ロールを作成し、そのロールを Chalie に割り当てる方法を見てみましょう。   </p><h2 id="カスタム-ロールの作成と割り当て"><a href="#カスタム-ロールの作成と割り当て" class="headerlink" title="カスタム ロールの作成と割り当て"></a>カスタム ロールの作成と割り当て</h2><p>次の例では、Alice はアプリケーションへのユーザーとグループの割り当てを管理する権限だけを持つカスタム ロールを作成します。カスタム ロールを作成したら、Alice はこのロールを Woodgrove Portal アプリのスコープで Charlie に割り当てることができます。これにより Charlie には、Woodgrove Portal アプリのユーザーとグループの割り当てを管理する権限が付与されます。  </p><h3 id="カスタム-ロールの作成"><a href="#カスタム-ロールの作成" class="headerlink" title="カスタム ロールの作成"></a>カスタム ロールの作成</h3><ol><li>ロールと管理者タブで、<strong>新しいカスタムロール</strong> を選択します。    </li></ol><p><img src="/blog/azure-active-directory/custom-roles-for-app-management-now-available/custom-roles-for-app-management-now-available1.png">  </p><ol start="2"><li>ロールの名前と説明を入力し、<strong>次へ</strong> を選択します。  </li></ol><p><img src="/blog/azure-active-directory/custom-roles-for-app-management-now-available/custom-roles-for-app-management-now-available2.png">  </p><ol start="3"><li>ロールにアクセス許可を割り当てます。<strong>servicePrincipal</strong> と入力して検索し、 <strong>microsoft.directory/servicePrincipals/appRoleAssignedTo/update</strong> 権限を選択します。  </li></ol><p><img src="/blog/azure-active-directory/custom-roles-for-app-management-now-available/custom-roles-for-app-management-now-available3.png">  </p><ol start="4"><li>新しいロールを確認します。問題がなければ、<strong>作成</strong> を選択して新しいロールを作成します。  </li></ol><p><img src="/blog/azure-active-directory/custom-roles-for-app-management-now-available/custom-roles-for-app-management-now-available4.png">  </p><h3 id="カスタム-ロールを割り当てる"><a href="#カスタム-ロールを割り当てる" class="headerlink" title="カスタム ロールを割り当てる"></a>カスタム ロールを割り当てる</h3><p>組み込みロールと同様に、カスタム ロールもディレクトリ レベルで割り当てて、すべてのエンタープライズ アプリケーションに対するアクセスを許可することができます。さらに、上の例で示すように、1 つのアプリケーションに対してのみ、カスタム ロールを割り当てることもできます。これにより、2 つ目のカスタム ロールを作成することなく、単一のアプリケーションのユーザとグループの割り当てを管理する権限をユーザーに与えることができます。</p><ol><li><strong>エンタープライズ アプリケーション</strong> タブを選択し、ユーザーとグループの割り当てを管理するためのアクセス権を与えたいアプリケーションを選択します。</li></ol><p><img src="/blog/azure-active-directory/custom-roles-for-app-management-now-available/custom-roles-for-app-management-now-available5.png"></p><ol start="2"><li>新しい <strong>ロールと管理者</strong> タブに移動します。上で作成したカスタムロールが表示されます。</li></ol><p><img src="/blog/azure-active-directory/custom-roles-for-app-management-now-available/custom-roles-for-app-management-now-available6.png"></p><ol start="3"><li>ロールを選択して、割り当てブレードを開きます。 <strong>割り当ての追加</strong> を選択し、ロールに追加するユーザーを選択します。</li></ol><p><img src="/blog/azure-active-directory/custom-roles-for-app-management-now-available/custom-roles-for-app-management-now-available7.png"></p><ol start="4"><li>割り当てを受けたユーザーは、アプリケーションのユーザーとグループ ブレードに移動すると、ユーザーの追加オプションが有効になっていることを確認できます。</li></ol><p>これで完了です。 Charlie は、Woodgrove Portal アプリへのアクセスを管理できるようになりました。その他に作成できる役割については、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/roles/custom-enterprise-app-permissions">こちら</a> を参照してください。</p><h2 id="今後の予定"><a href="#今後の予定" class="headerlink" title="今後の予定"></a>今後の予定</h2><p>私たちは、カスタム ロールや管理単位に関する追加機能、その他の最小特権を実現する仕組みなど、Azure AD RBAC のさらなる素晴らしい機能の開発に取り組んでいます。今後のアナウンスにご期待ください。</p><p>いつもどおり、皆様のご意見、ご感想、ご提案をお聞かせください。<a href="https://feedback.azure.com/forums/169401-azure-active-directory?category_id=166032">Azure AD 管理者ロール フォーラム</a> で共有するか、以下にコメントを残してください。ご連絡をお待ちしております。</p><p>Alex Simons (<a href="https://twitter.com/Alex_A_Simons">@Alex_A_Simons</a>)<br>Corporate VP of Program Management<br>Microsoft Identity Division</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、 Azure Identity サポート チームの小出です。&lt;/p&gt;
&lt;p&gt;本記事は、 2022 年 3 月 2 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techcom</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD の新しい多段階アクセス レビューによる最小権限モデルの実現</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/achieve-a-least-privilege-model-using-azure-ad-s-new-multi-stage/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/achieve-a-least-privilege-model-using-azure-ad-s-new-multi-stage/</id>
    <published>2022-03-13T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.421Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 2 月 28 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/achieve-a-least-privilege-model-using-azure-ad-s-new-multi-stage/ba-p/3185211">Achieve a least privilege model using Azure AD’s new multi-stage access reviews</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>皆さん、こんにちは。</p><p>本日、Azure AD のアクセス レビューにおける、複数ステージのレビューのパブリック プレビューを発表いたします。</p><p>この機能拡張により、アクセス レビューを順を追ったステージで構築し、ステージ毎に異なるレビュー担当者と設定を実装することができます。</p><p>この機能により、お客様のテナント内で複数のレビュー担当者が特定の順序でユーザーのアクセスを証明するよう再認定や監査の要件を満たすよう複雑なワークフローを実現することができます。また、各レビュー担当者が責任を負う意思決定の数を減らすことで、リソース所有者やレビュー担当者が、より効率的なレビューを設計できるようになります。以前は、レビューのために人為的に複数の異なるレビューを作成していたかもしれませんが、複数ステージのレビューでは、このすべてをたった一度のレビューの中で行えます。</p><h2 id="複数ステージのレビューにより実現できるアクセス認定の主要なシナリオ"><a href="#複数ステージのレビューにより実現できるアクセス認定の主要なシナリオ" class="headerlink" title="複数ステージのレビューにより実現できるアクセス認定の主要なシナリオ"></a>複数ステージのレビューにより実現できるアクセス認定の主要なシナリオ</h2><ul><li><strong>複数のレビュー担当者の間での合意形成</strong>: アクセスを再認定する前に、すべてのステージで異なるレビュー担当者の合意を必要とする。 </li><li><strong>未審査の決定について代替のレビュー担当者を設定</strong>: レビュー担当者が不在や外出中の際に未審査のまま放置されたアカウントは、ユーザーの上司やリソース所有者など、次の適切なレビュー担当者に送られるようにする。 </li><li><strong>後続のステージのレビュー担当者の負担を軽減</strong>: 前のステージで拒否されたアカウントを除外することで、後のステージのレビュー担当者が行う決定の数を絞り込みます。例えば、リソースの所有者に認証を依頼する前に、ユーザー自身にアクセスの必要性を確認してもらうようにします。 </li></ul><h2 id="複数ステージのアクセス-レビューをぜひお試しください"><a href="#複数ステージのアクセス-レビューをぜひお試しください" class="headerlink" title="複数ステージのアクセス レビューをぜひお試しください"></a>複数ステージのアクセス レビューをぜひお試しください</h2><p><img src="/blog/azure-active-directory/achieve-a-least-privilege-model-using-azure-ad-s-new-multi-stage/ja_image01.png"></p><p>上記は、複数ステージのレビューの設定画面です。最大 3 つのステージを指定でき、各ステージのレビュー担当者と期間を個別に選択することもできます。さらに、前のステージでの決定を後のステージのレビュー担当者に公開するかどうかを定義することもできます。 </p><p>最後に、どのレビュー担当者が次のステージへ進むかを指定します。</p><p><img src="/blog/azure-active-directory/achieve-a-least-privilege-model-using-azure-ad-s-new-multi-stage/ja_image2.png"></p><p>複数ステージのレビューの設定方法の詳細については、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/create-access-review">Azure AD アクセス レビューのドキュメント</a> をご参照ください。MS Graph API (beta) を使ってこれらのレビューを試すには、<a href="https://docs.microsoft.com/ja-jp/graph/api/accessreviewset-post-definitions?view=graph-rest-beta&tabs=http%22%20%5Cl%20%22example-4-create-an-access-review-on-a-group-with-multiple-stages">MS Graph API ドキュメント</a> をご確認ください。</p><p>お客様の認証ニーズに対して、複数ステージのレビューがどのように活用されるかとても楽しみです。</p><p>Alex Simons (Twitter: <a href="https://twitter.com/alex_a_simons">@Alex_A_Simons</a><br>Corporate Vice President Program Management<br>Microsoft Identity Division</p><hr><h2 id="よくあるご質問"><a href="#よくあるご質問" class="headerlink" title="よくあるご質問"></a>よくあるご質問</h2><p><strong>Q: ゲストのレビューに複数ステージのレビューを使用できますか？</strong></p><p>はい、ゲスト ユーザーにも複数ステージのレビューを使用することができます。また、ゲスト ユーザーをセルフ レビュアー (自身をレビュー担当者) として、3 つのステージのいずれかに参加させることも可能です。</p><p><strong>Q: ダウンロードできるレビュー履歴レポートには、複数ステージののレビュー担当者が表示されますか？</strong></p><p>はい、表示されます。レビュー履歴レポートには、最大 3 ステージのレビュー担当者が記録されます。レビュー履歴レポートのダウンロードについては <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/access-reviews-downloadable-review-history">こちら</a> をご覧ください。</p><p><strong>Q: 以前、レビューで複数のレビュー担当者を設定したことがあります。複数ステージのレビューはどう違うのですか？</strong></p><p>複数のレビュー担当者の場合、ひとつのステージで全員が同時にレビューに関与します。それらレビュー担当者の判断に優劣はなく、レビュー期間の終了時には、最後のレビュー担当者の判断が適用されます。 </p><p>複数ステージのレビューでは、1 人または複数のレビュー担当者からなる最大 3 名の担当者を定義し、順次レビューを行っていきます。最初のステージのレビュー担当者がレビューを完了してから、2 番目のステージのレビュー担当者がレビューを開始します。異なるステージのレビュー担当者は独立してレビューを行い、どのレビュー担当者の場合にそのステージから別のステージに移動するか、またレビュー担当者が以前のステージの判断結果を見れるかどうかを設定することができます。</p><p><strong>Q: Azure AD ロールまたは Azure RBAC ロールの Privileged Identity Management ロール割り当てに複数ステージのレビューを使用したいです。ロール割り当てレビューに複数ステージを設定するにはどうすればよいですか?</strong></p><p>現在、多段構成をサポートするレビューの種類を拡張すべく取り組んでいます。現時点では、アプリケーションに加え、Security グループと M365 グループのレビューに対してのみ、複数ステージのレビューをサポートしています。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 2 月 28 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD Identity Protection をワークロード ID へも拡張</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/extend-the-reach-of-azure-ad-identity-protection-into-workload/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/extend-the-reach-of-azure-ad-identity-protection-into-workload/</id>
    <published>2022-03-12T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.581Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 村上 です。</p><p>本記事は、2022 年 2 月 23 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/extend-the-reach-of-azure-ad-identity-protection-into-workload/ba-p/2365666">Extend the reach of Azure AD Identity Protection into workload identities</a> を意訳したものになります。ご不明点等ございましたらサポート チームまでお問い合わせください。</p><hr><p>本日は、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/identity-protection/concept-workload-identity-risk">ワークロード ID 向け Azure AD Identity Protection のパブリック プレビュー</a> をご紹介できることを嬉しく思います。弊社では、特に現在の攻撃者の振る舞いを考慮し、ユーザー アカウントの保護から得たすべての知見を <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/develop/workload-identities-overview">ワークロード ID</a> に適用すべく、お客様とともに取り組んできました。ワークロード ID 用に開発された異常検知機能により、ユーザー用の検知機能と併せ、お客様の資産全体を保護可能です。</p><p>企業のクラウド コンピューティングへの移行に伴い、企業はクラウド リソースにアクセスするソフトウェア ワークロード (アプリケーション、サービス、スクリプトなど) を展開しています。これらのワークロードでは、Azure AD の <a href="https://www.microsoft.com/en-us/security/business/identity-access-management/workload-identity-management">ワークロード ID</a>（アプリケーション、マネージド ID、およびサービス プリンシパル）が利用されます。</p><p>当社の社内調査によると、通常、組織にはユーザーの <strong>5 倍以上</strong> のソフトウェア ワークロードが存在すると言われています。ワークロード ID が侵害されると、それらは攻撃者が攻撃先をさらに横展開して広げていく足がかりとなります。このような攻撃は増加の一途をたどっており、お客様においても喫緊でこれら ID のセキュリティに、人間のユーザーのセキュリティと同じように目を向けつつある状況です。</p><p>さっそく、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/identity-protection/concept-workload-identity-risk">ワークロード ID 向け Azure AD Identity Protection</a> の新しい検出、制御、SIEM 統合機能とその効果について見ていきましょう。</p><h2 id="侵害されたワークロード-ID-の検出と対応"><a href="#侵害されたワークロード-ID-の検出と対応" class="headerlink" title="侵害されたワークロード ID の検出と対応"></a>侵害されたワークロード ID の検出と対応</h2><p>組織は貴重なリソースとデータを保護するために、侵害のリスクを減らす機能を必要としています。Azure AD Identity Protection ではすでに、認証情報が漏洩したユーザーやリスクの高いセッションを検出することでお客様を保護しています。今回の発表では、この保護をワークロード ID に拡張し、疑わしいログイン パターンやディレクトリの変更を含む、アプリケーションの異常な動作のレポート機能を提供することで、より迅速に攻撃を検出して修正できるように支援します。</p><p><img src="/blog/azure-active-directory/extend-the-reach-of-azure-ad-identity-protection-into-workload/Image01.png" alt="危険なワークロード ID レポート"></p><h2 id="リスク-ベースの条件付きアクセスで、ゼロ-トラストの展開を強化"><a href="#リスク-ベースの条件付きアクセスで、ゼロ-トラストの展開を強化" class="headerlink" title="リスク ベースの条件付きアクセスで、ゼロ トラストの展開を強化"></a>リスク ベースの条件付きアクセスで、ゼロ トラストの展開を強化</h2><p>ゼロ トラストの重要なポイントは、「明示的な検証」を行い、システムが異常を検出した場合には安全を確保することです。リスク ベースの条件付きアクセス ポリシーを適用することで、Identity Protection がリスクの高いワークロード ID を Microsoft Graph で検出したときに、アクセスをブロックすることが可能です (Azure Portal でのサポートは近日公開予定です)。つまり、すべてのシングル テナントのアプリケーションにおいて、高リスク、中リスク、低リスクの任意の組み合わせでブロックするポリシーを設定できます (マルチ テナントのアプリケーションについては、今後対応予定です)。</p><p><img src="/blog/azure-active-directory/extend-the-reach-of-azure-ad-identity-protection-into-workload/Image02.png" alt="条件付きアクセスにおけるワークロード ID 向けリスク レベル設定"></p><h2 id="リスク-データを任意の場所にエクスポート"><a href="#リスク-データを任意の場所にエクスポート" class="headerlink" title="リスク データを任意の場所にエクスポート"></a>リスク データを任意の場所にエクスポート</h2><p>非常に多くのお客様が、Azure ポータル以外のツールを使って Identity Protection のログを解析しています。本日より、分析または長期保存のために、リスク イベントをご希望のソリューションにエクスポートすることが可能となります。ポータル上の [診断設定] から、お試しいただけます。</p><p><img src="/blog/azure-active-directory/extend-the-reach-of-azure-ad-identity-protection-into-workload/Image03.png" alt="危険なサービス プリンシパルとサービス プリンシパル イベントのエクスポート"></p><p>弊社では、ワークロード ID を含むすべての ID の保護に取り組んでおり、この分野のさらなる新機能を近々お届けする予定です。わたしたちは、いつもながら、皆様の貴重なフィードバックをお待ちしています。ワークロード ID に関する詳細は、<a href="https://docs.microsoft.com/ja-jp/azure/active-directory/identity-protection/concept-workload-identity-risk">ID 保護に関するドキュメント</a> をご覧ください。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 村上 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 2 月 23 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft Graph PowerShell SDK を使用したライセンス管理操作の紹介 (一括設定編)</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph2/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph2/</id>
    <published>2022-03-10T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.777Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの中井です。</p><p>MSOnline および Azure AD PowerShell モジュールにてライセンス割り当て操作が利用できなくなることに伴い、弊サポート チームでは以下ブログにて Microsoft Graph PowerShell を用いた代替操作方法をご紹介させていただきました。</p><p><a href="https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph/">Microsoft Graph PowerShell SDK を使用したライセンス管理操作の紹介</a></p><p>上記事では主に単一のユーザーに対して、一部のサービス プランを無効にしてライセンスを割り当てるなど、様々なシナリオにおけるライセンス割り当て・削除のコマンド例を記載いたしました。</p><p>今回のブログでは、ご要望いただくことも多い、複数のユーザーに対しライセンスを一括で設定する手順について、ご紹介いたします。</p><p><strong>主に CSV ファイルを用いて、テナント内ユーザーに対するライセンス付与・削除操作となります。</strong> </p><p>なお Microsoft Graph PowerShell のインストールおよび、Connect-MgGraph によるテナント接続方法の詳細につきましては上記記事内の項目１, 2 をご覧ください。本記事では、以下の項目 2 のうち 「管理者の資格情報を使用する」方法にて、テナント接続を行うとします。</p><p>項目 1. <a href="https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph/#idx1">Microsoft Graph PowerShell のインストール</a><br>項目 2. <a href="https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph/#idx2">Connect-MgGraph による Azure AD へのサインイン</a></p><p>▼ 一部抜粋<br>事前に以下コマンドにて、テナントへの接続を行います。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Connect-MgGraph</span> <span class="literal">-Scopes</span> <span class="string">&quot;Organization.Read.All&quot;</span>,<span class="string">&quot;User.ReadWrite.All&quot;</span></span><br><span class="line"><span class="built_in">Import-Module</span> <span class="literal">-Name</span> Microsoft.Graph.Users</span><br></pre></td></tr></table></figure><h2 id="目次"><a href="#目次" class="headerlink" title="目次"></a>目次</h2><ol><li>CSV ファイルを用いて一括で新規ユーザーを作成する (新規ユーザーへの割り当ての場合)</li><li>ライセンス割り当て対象の既存ユーザーを CSV ファイルにまとめる</li><li>ユーザーに割り当てるライセンス情報を作成する</li><li>CSV ファイルにまとめた既存ユーザーへライセンスを割り当てる</li></ol><p>※ テナント上の既存ユーザーに対しライセンスを割り当てる場合は手順 2 へお進みください。</p><div class="alert is-important"><p class="alert-title">重要</p><p>Microsoft Graph PowerShell にて新規ユーザー作成を行う New-MgUser コマンドでは、MSOnline PowerShell の <code>New-MsolUserLicense  -LicenseAssignment</code>のように、新規ユーザー作成と同時にライセンスを割り当てるオプションがありません。</p><p>したがって、新規ユーザーに対してライセンスの割り当てを行う場合は、事前にテナント上に対象のユーザーを作成しておき、Set-MgUser コマンドを用いて対象ユーザーに対しライセンスを割り当てを行います。</p></div><p>以下では、CSV ファイルを用いて、ライセンス割り当て対象のユーザーを一括で作成するサンプル スクリプトをご紹介します。ライセンス割り当てに限らず、PowerShell を用いてユーザーを作成したいシナリオでぜひお役立てください。</p><h2 id="1-CSV-ファイルを用いて一括で新規ユーザーを作成する-新規ユーザーへの割り当ての場合"><a href="#1-CSV-ファイルを用いて一括で新規ユーザーを作成する-新規ユーザーへの割り当ての場合" class="headerlink" title="1. CSV ファイルを用いて一括で新規ユーザーを作成する (新規ユーザーへの割り当ての場合)"></a>1. CSV ファイルを用いて一括で新規ユーザーを作成する (新規ユーザーへの割り当ての場合)</h2><p>メモ帳を開き、以下のようにカンマ区切りで値を設定し、<strong>CSV ファイル</strong> として保存します。MailNickname 属性はユーザーのメール エイリアス値であり、必須項目となっています。</p><p>※エラーが発生するリスクを回避する為、1 つの CSV ファイルに最大で 1,000 アカウント前後とすることを推奨いたします。</p><p>▼ CSV ファイル（メモ帳）の作成例</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UserPrincipalName,MailNickname,DisplayName,GivenName,Surname,Password,&lt;その他属性&gt;</span><br><span class="line">user1@xxx.com,user1,User01,User,01,Pass1234,…</span><br><span class="line">user2@xxx.com,user2,User02,User,02,Pass1234,…</span><br></pre></td></tr></table></figure><p>▼ メモ帳での作成例</p><p><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph2/making-users-memo.png"></p><p>Office 365 の既定のパスワードは、一定のパスワード強度を満たしたものを設定する必要があります。一定の強度 (要件) を満たしていない場合にはパスワード設定は完了しません。パスワード要件に関する詳細は <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/authentication/concept-sspr-policy#password-policies-that-only-apply-to-cloud-user-accounts">Azure AD パスワード ポリシー</a> に関する公開情報もご参照ください。</p><p>▼ パスワードの設定要件例</p><ul><li>8 文字以上の文字数である必要があります。</li><li>簡単に推測されたり、解読されない強力なパスワードを作成します。英字の大文字、小文字、数字、記号のうち、最低でも 3 つの種類を含める必要があります。</li></ul><p>他に設定したい項目がある場合には、以下より CSV ファイルおよび 後述の コマンドレットの &lt;その他属性&gt; に追記ください。</p><ul><li>ユーザー名: UserPrincipalName</li><li>名: Surname</li><li>姓: GivenName</li><li>表示名: DisplayName</li><li>役職: JobTitle</li><li>部署: Department</li><li>事業所: OfficeLocation</li><li>事業所の電話: BusinessPhones</li><li>携帯電話: MobilePhone</li><li>FAX 番号: FaxNumber</li><li>番地: StreetAddres</li><li>市区町村: City</li><li>都道府県: State</li><li>郵便番号: PostalCode</li><li>国/地域: Country</li></ul><p>CSV ファイルの作成が完了しましたら、以下例のコマンドレットを実行し新規にユーザーを作成します。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$path</span> = <span class="string">&quot;＜作成した CSV ファイル名を含んだ保存先のパス&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Import-Csv</span> <span class="literal">-Path</span> <span class="variable">$path</span> |<span class="built_in">ForEach-Object</span> &#123;<span class="built_in">New-MgUser</span> <span class="literal">-AccountEnabled</span> <span class="literal">-UsageLocation</span> <span class="string">&quot;JP&quot;</span> <span class="literal">-UserPrincipalName</span> <span class="variable">$_</span>.UserPrincipalName <span class="literal">-DisplayName</span> <span class="variable">$_</span>.DisplayName <span class="literal">-MailNickname</span> <span class="variable">$_</span>.MailNickname <span class="literal">-PasswordProfile</span> <span class="selector-tag">@</span>&#123;<span class="string">&quot;Password&quot;</span>=<span class="variable">$_</span>.Password;ForceChangePasswordNextSignIn=<span class="variable">$false</span>&#125;&#125;</span><br></pre></td></tr></table></figure><p>▼ 実行例</p><p>以下では、&lt;その他属性&gt; として「名」「姓」「部署」を追加しています。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$path</span> = <span class="string">&quot;C:\temp\users.csv&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Import-Csv</span> <span class="literal">-Path</span> <span class="variable">$path</span> |<span class="built_in">ForEach-Object</span> &#123;<span class="built_in">New-MgUser</span> <span class="literal">-AccountEnabled</span> <span class="literal">-UsageLocation</span> <span class="string">&quot;JP&quot;</span> <span class="literal">-UserPrincipalName</span> <span class="variable">$_</span>.UserPrincipalName<span class="literal">-DisplayName</span> <span class="variable">$_</span>.DisplayName <span class="literal">-MailNickname</span> <span class="variable">$_</span>.MailNickname <span class="literal">-PasswordProfile</span> <span class="selector-tag">@</span>&#123;<span class="string">&quot;Password&quot;</span>=<span class="variable">$_</span>.Password;ForceChangePasswordNextSignIn=<span class="variable">$false</span>&#125;`</span><br><span class="line"><span class="literal">-GivenName</span> <span class="variable">$_</span>.GivenName <span class="literal">-Surname</span> <span class="variable">$_</span>.Surname <span class="literal">-Department</span> <span class="variable">$_</span>.Department</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>ForceChangePasswordNextSignIn</code> は、初回サインイン時の挙動を指定するオプションです。<code>ForceChangePasswordNextSignIn = $true</code> を指定すると、ユーザーは初回サインイン時にパスワード変更が求められます。<code>ForceChangePasswordNextSignIn = $false</code> の場合、ユーザーにはパスワード変更が求められず、管理者が指定したパスワードを使い続けることができます。</p><p>▼ 実行結果例</p><p><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph2/making-users.png"></p><h2 id="2-ライセンス割り当て対象の既存ユーザーを-CSV-ファイルにまとめる"><a href="#2-ライセンス割り当て対象の既存ユーザーを-CSV-ファイルにまとめる" class="headerlink" title="2. ライセンス割り当て対象の既存ユーザーを CSV ファイルにまとめる"></a>2. ライセンス割り当て対象の既存ユーザーを CSV ファイルにまとめる</h2><p>csv ファイルを使用してライセンスの一括割当および変更を行う場合は、下記例を参考に事前準備として既存ユーザーを CSV ファイルに一覧で出力ください。</p><p>なお形式は、以下のように 1 つの列に「UserPrincipalName」属性が含まれていれば手動で作成いただいて構いません。</p><p>※ 一行目には、ラベル “UserPrincipalName” を値として格納ください。</p><p><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph2/assigned-users.png"></p><h3 id="全ユーザーの-UserPrincipalName-の一覧を出力する"><a href="#全ユーザーの-UserPrincipalName-の一覧を出力する" class="headerlink" title="全ユーザーの UserPrincipalName の一覧を出力する"></a>全ユーザーの UserPrincipalName の一覧を出力する</h3><p>Get-MgUser コマンドを用いて、テナント内の全ユーザーを出力します。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Get-MgUser</span> <span class="literal">-All</span> | <span class="built_in">Select-Object</span> UserPrincipalName | <span class="built_in">Export-Csv</span> &lt;出力先の csv ファイルパス&gt; <span class="literal">-Encoding</span> UTF8 <span class="literal">-NoTypeInformation</span></span><br></pre></td></tr></table></figure><h3 id="特定ライセンスが付与されているユーザーの-UserPrincipalName-の一覧を出力する"><a href="#特定ライセンスが付与されているユーザーの-UserPrincipalName-の一覧を出力する" class="headerlink" title="特定ライセンスが付与されているユーザーの UserPrincipalName の一覧を出力する"></a>特定ライセンスが付与されているユーザーの UserPrincipalName の一覧を出力する</h3><p>ユーザー属性の 1 つである <code>assingedLicenses</code> プロパティを用いてフィルタリングすることで、テナント内で特定ライセンスが付与されているユーザーを抽出することが可能です。事前に、下記ブログにて紹介しております <code>Get-MgSubscribedSku</code> コマンドにて、割り当てたいライセンスの [SkuId] をご確認ください。</p><p>ブログ該当箇所: <a href="https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph/#idx3">3. ライセンス情報の取得</a></p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$skuId</span> = <span class="string">&quot;&lt;ライセンスの skuId&gt;&quot;</span></span><br><span class="line"><span class="comment"># CSV ファイルの出力先を入力ください。</span></span><br><span class="line"><span class="variable">$path</span> = <span class="string">&quot;C:\temp\assignedUser.csv&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$users</span> = <span class="built_in">Get-MgUser</span> <span class="literal">-Filter</span> <span class="string">&quot;assignedLicenses/any(s:s/skuId eq <span class="variable">$skuId</span>)&quot;</span> </span><br><span class="line"><span class="variable">$users</span> |<span class="built_in">select</span> <span class="selector-tag">@</span>&#123;n=<span class="string">&quot;ObjectId&quot;</span>; e=&#123;<span class="variable">$_</span>.Id&#125;&#125;, <span class="selector-tag">@</span>&#123;n=<span class="string">&quot;UserPrincipalName&quot;</span>; e=&#123;<span class="variable">$_</span>.UserPrincipalName&#125;&#125;, <span class="selector-tag">@</span>&#123;n=<span class="string">&quot;DisplayName&quot;</span>; e=&#123;<span class="variable">$_</span>.DisplayName&#125;&#125; | <span class="built_in">Export-Csv</span> <span class="literal">-NoTypeInformation</span> <span class="literal">-Encoding</span> UTF8 <span class="literal">-Path</span> <span class="variable">$path</span></span><br></pre></td></tr></table></figure><h3 id="特定のライセンスに含まれるサービスが有効になっているユーザーだけを一覧で出力する"><a href="#特定のライセンスに含まれるサービスが有効になっているユーザーだけを一覧で出力する" class="headerlink" title="特定のライセンスに含まれるサービスが有効になっているユーザーだけを一覧で出力する"></a>特定のライセンスに含まれるサービスが有効になっているユーザーだけを一覧で出力する</h3><p>ユーザー属性の１つである <code>assignedPlans</code> プロパティを用いてフィルタリングすることで、テナント内で特定のサービス プランが付与されているユーザーを抽出することが可能です。事前に、下記ブログにて紹介しております <code>Get-MgSubscribedSku</code> コマンドにて、割り当てたいライセンスの中に含まれる各サービスの [ServicePlanId] をご確認ください。</p><p>ブログ該当箇所: <a href="https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph/#idx3">3. ライセンス情報の取得</a></p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$servicePlanId</span> = <span class="string">&quot;&lt;サービスプラン Id&gt;&quot;</span></span><br><span class="line"><span class="comment"># CSV ファイルの出力先を入力ください。</span></span><br><span class="line"><span class="variable">$path</span> = <span class="string">&quot;C:\temp\assignedUser.csv&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$users</span> = <span class="built_in">Get-MgUser</span> <span class="literal">-Filter</span> <span class="string">&quot;assignedPlans/any(s:s/servicePlanId eq <span class="variable">$servicePlanId</span> and s/capabilityStatus eq &#x27;Enabled&#x27;)&quot;</span> <span class="literal">-CountVariable</span> CountVar <span class="literal">-ConsistencyLevel</span> eventual</span><br><span class="line"><span class="variable">$users</span> |<span class="built_in">select</span> <span class="selector-tag">@</span>&#123;n=<span class="string">&quot;ObjectId&quot;</span>; e=&#123;<span class="variable">$_</span>.Id&#125;&#125;, <span class="selector-tag">@</span>&#123;n=<span class="string">&quot;UserPrincipalName&quot;</span>; e=&#123;<span class="variable">$_</span>.UserPrincipalName&#125;&#125;, <span class="selector-tag">@</span>&#123;n=<span class="string">&quot;DisplayName&quot;</span>; e=&#123;<span class="variable">$_</span>.DisplayName&#125;&#125; | <span class="built_in">Export-Csv</span> <span class="literal">-NoTypeInformation</span> <span class="literal">-Encoding</span> UTF8 <span class="literal">-Path</span> <span class="variable">$path</span></span><br></pre></td></tr></table></figure><p>※ 上記で紹介した<code>assignedLicense</code> と <code>assignedPlans</code> プロパティによるクエリ文については、Graph API に関する以下公開情報が参考情報とりますので、併せてお役立てください。</p><p>タイトル: <a href="https://docs.microsoft.com/ja-jp/graph/query-parameters#filter-parameter">クエリ パラメーターを使用して応答をカスタマイズする</a></p><h2 id="3-ユーザーに割り当てるライセンス情報を作成する"><a href="#3-ユーザーに割り当てるライセンス情報を作成する" class="headerlink" title="3. ユーザーに割り当てるライセンス情報を作成する"></a>3. ユーザーに割り当てるライセンス情報を作成する</h2><p>いよいよライセンス付与に移る前に、本項目ではまずライセンス割り当ての考え方を説明します。</p><p>ライセンス割り当ておよび削除には全て、以下の <code>Set-MgUserLicense</code> コマンドを用います。作成したライセンス オプション (<code>$NewLicenseArray</code>) をユーザーに適用することで、現在のライセンスの内容から、作成したライセンス オプションの内容に変更します。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Set-MgUserLicense</span> <span class="literal">-UserId</span> &lt;対象ユーザーの UPN&gt; <span class="literal">-AddLicenses</span> <span class="selector-tag">@</span>(&lt;ライセンス オプション&gt;) <span class="literal">-RemoveLicenses</span> <span class="selector-tag">@</span>(<span class="string">&quot;&lt;削除するライセンスの SkuId&gt;&quot;</span>)</span><br></pre></td></tr></table></figure><p><code>AddLicenses</code> パラメータに指定するライセンス オプションでは、<strong>MicrosoftGraphAssignedLicense オブジェクト</strong> を作成し、割り当てるライセンスの SkuId を配列として指定します。一方、<code>RemoveLicenses</code> パラメータには、削除するライセンスの <strong>SkuId を文字列として</strong> そのまま指定します。(必須オプションとなり、ライセンス付与のみを行う際には空の配列 @() を指定します。)</p><p><code>AddLicenses</code> と <code>RemoveLicenses</code> パラメータで指定するオブジェクトの形式が異なるため、混乱を招くかもしれません。 図にまとめると以下のイメージです。</p><p><img src="/blog/azure-active-directory/operating-license-with-microsoft-graph2/license-option.png"></p><p>さて、<code>AddLicenses</code> パラメータに指定するライセンス オプションの形式は以下のようになります。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$</span>&lt;ライセンスオプション名&gt; = <span class="built_in">New-Object</span> <span class="literal">-TypeName</span> Microsoft.Graph.PowerShell.Models.MicrosoftGraphAssignedLicense <span class="literal">-Property</span> <span class="selector-tag">@</span>&#123;SkuId = <span class="string">&quot;&lt;割り当てるライセンスの SkuId&gt;&quot;</span>; DisabledPlans = <span class="selector-tag">@</span>(<span class="string">&quot;&lt;無効にするサービス プランの ServicePlanId&gt;&quot;</span>)&#125;</span><br></pre></td></tr></table></figure><p>例えば、利用したいサービス以外の一部のサービスを無効化したライセンス オプションは以下のようになります。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="variable">$License1</span> = <span class="built_in">New-Object</span> <span class="literal">-TypeName</span> Microsoft.Graph.PowerShell.Models.MicrosoftGraphAssignedLicense <span class="literal">-Property</span> <span class="selector-tag">@</span>&#123;SkuId = <span class="string">&quot;c7df2760-2c81-4ef7-b578-5b5392b571df&quot;</span>; DisabledPlans = <span class="selector-tag">@</span>(<span class="string">&quot;a23b959c-7ce8-4e57-9140-b90eb88a9e97&quot;</span>, <span class="string">&quot;7547a3fe-08ee-4ccb-b430-5077c5041653&quot;</span>)&#125;</span><br></pre></td></tr></table></figure><p>上記実行例では Office 365 Enterprise E5 から、[Sway] と [Yammer Enterprise] の 2 つのサービスを無効にしています。</p><p>詳細なライセンス オプションのパターンは、下記のライセンス割り当てのシナリオそれぞれにおいてご紹介しておりますので、併せて参照ください。</p><p>ブログ該当箇所: <a href="https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph/#idx4">シナリオ 1: ユーザーにライセンスを割り当てる</a></p><h2 id="4-CSV-ファイルにまとめた既存ユーザーへライセンスを割り当てる"><a href="#4-CSV-ファイルにまとめた既存ユーザーへライセンスを割り当てる" class="headerlink" title="4. CSV ファイルにまとめた既存ユーザーへライセンスを割り当てる"></a>4. CSV ファイルにまとめた既存ユーザーへライセンスを割り当てる</h2><div class="alert is-info"><p class="alert-title">Note</p><p>まずは上述の手順 1 または 手順 2 にて、UserPrincipalName が列名として存在する CSV ファイルをご用意ください。</p><p>また、以後、csv ファイルのパスは変数 $path に格納しているものとします。</p><p>例) $path = “C:\temp\assignedUser.csv”</p></div><h3 id="PowerShell-を用いた一括割り当ての構文"><a href="#PowerShell-を用いた一括割り当ての構文" class="headerlink" title="PowerShell を用いた一括割り当ての構文"></a>PowerShell を用いた一括割り当ての構文</h3><p>さて、肝心の一括割り当て操作ですが、一括操作には以下の PowerShell コマンドレットの構文を用います。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Import-Csv</span> &lt;csv ファイルのパス名&gt; | <span class="built_in">ForEach-Object</span> &#123; </span><br><span class="line">    &lt;各データに対するコマンドレット操作&gt; &#125;</span><br></pre></td></tr></table></figure><p><code>Import-Csv</code> コマンド にて読み込まれた CSV ファイル内の各行データの情報を、<code>ForEach-Object &#123;&#125;</code> へパイプ（<code>|</code>）することで順次実行します。パイプにより渡されたオブジェクトは <code>$_</code> で参照します。実際に、以下の複数の例を見ながら理解を深めていただけると幸いです。</p><h3 id="初めてライセンスを割り当てる場合"><a href="#初めてライセンスを割り当てる場合" class="headerlink" title="初めてライセンスを割り当てる場合"></a>初めてライセンスを割り当てる場合</h3><p>対象ユーザーについて、これまでライセンスの割り当てがなく今回初めてライセンスを割り当てる場合は、事前に以下のコマンドレットで [所在地] を設定します。以下例では、所在地として日本「JP」を設定しています。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Import-Csv</span> <span class="variable">$path</span> | <span class="built_in">ForEach-Object</span> &#123; </span><br><span class="line">    <span class="built_in">Update-MgUser</span> <span class="literal">-UserId</span> <span class="variable">$_</span>.UserPrincipalName <span class="literal">-UsageLocation</span> <span class="string">&quot;JP&quot;</span> &#125;</span><br></pre></td></tr></table></figure><h3 id="ライセンスの割り当て"><a href="#ライセンスの割り当て" class="headerlink" title="ライセンスの割り当て"></a>ライセンスの割り当て</h3><p>所在地を設定したら、項目 2 でお伝えの <code>Set-MgUserLicense</code> コマンドにてユーザーに対しライセンスを割り当てます。下記コマンド内のライセンス オプションでは、「3. ユーザーに割り当てるライセンス情報を作成する」で作成した <code>$License1</code> のような引数 (ライセンス オプション) を指定します。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Import-Csv</span> &lt;csv ファイルのパス名&gt; | <span class="built_in">ForEach-Object</span> &#123; <span class="built_in">Set-MgUserLicense</span> <span class="literal">-UserId</span> <span class="variable">$_</span>.UserPrincipalName <span class="literal">-AddLicenses</span> <span class="selector-tag">@</span>(&lt;ライセンス オプション&gt;) <span class="literal">-RemoveLicenses</span> <span class="selector-tag">@</span>() &#125;</span><br></pre></td></tr></table></figure><p>▼ 実行例</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Import-Csv</span> <span class="variable">$path</span> | <span class="built_in">ForEach-Object</span> &#123; <span class="built_in">Set-MgUserLicense</span> <span class="literal">-UserId</span> <span class="variable">$_</span>.UserPrincipalName <span class="literal">-AddLicenses</span> <span class="selector-tag">@</span>(<span class="variable">$License1</span>) <span class="literal">-RemoveLicenses</span> <span class="selector-tag">@</span>() &#125;</span><br></pre></td></tr></table></figure><p>新しいライセンス割り当てと同時に、割り当てられている既存のライセンスを削除する場合は、RemoveLicenses パラメーターに削除したいライセンスの SkuId を配列として指定します。これだけで新しいライセンス割り当てと同時に既存のライセンス削除が可能となります。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Import-Csv</span> <span class="variable">$path</span> | <span class="built_in">ForEach-Object</span> &#123; <span class="built_in">Set-MgUserLicense</span> <span class="literal">-UserId</span> <span class="variable">$_</span>.UserPrincipalName <span class="literal">-AddLicenses</span> <span class="selector-tag">@</span>(&lt;ライセンス オプション&gt;) <span class="literal">-RemoveLicenses</span> <span class="selector-tag">@</span>(<span class="string">&quot;&lt;削除するライセンスの SkuId&gt;&quot;</span>) &#125;</span><br></pre></td></tr></table></figure><p>配列には複数の要素を指定できるので、例えば複数のライセンスを割り当て、同時に複数の既存ライセンスを削除するには以下のように実行できます。</p><div class="alert is-warning"><p class="alert-title">警告</p><p>改めて、AddLicenses パラメータ $License1, $License2 には文字列ではなく、 項目 2 で作成したライセンス オプションのオブジェクトを指定しているかをご確認ください。</p><p>実際にライセンス割り当てを実施いただく前に、お客様環境で少数のテスト ユーザーを用いて動作を検証くださいますようお願い申し上げます。</p><p>適切でない構文によりライセンス付与には失敗した場合でも、RemoveLicenses 部分が正しい構文の場合には コマンドが実行され、指定したライセンスが削除されますのでご注意ください。</p></div><p>▼ 実行例</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Import-Csv</span> <span class="variable">$path</span> | <span class="built_in">ForEach-Object</span> &#123; <span class="built_in">Set-MgUserLicense</span> <span class="literal">-UserId</span> <span class="variable">$_</span>.UserPrincipalName  <span class="literal">-AddLicenses</span> <span class="selector-tag">@</span>(<span class="variable">$License1</span>, <span class="variable">$License2</span>) <span class="literal">-RemoveLicenses</span> <span class="selector-tag">@</span>(<span class="string">&quot;b05e124f-c7cc-45a0-a6aa-8cf78c946968&quot;</span>, <span class="string">&quot;c7df2760-2c81-4ef7-b578-5b5392b571df&quot;</span>) &#125;</span><br></pre></td></tr></table></figure><h3 id="特定のライセンスを削除する場合"><a href="#特定のライセンスを削除する場合" class="headerlink" title="特定のライセンスを削除する場合"></a>特定のライセンスを削除する場合</h3><p>前回のライセンス管理操作のブログ記事 <a href="https://jpazureid.github.io/blog/azure-active-directory/operating-license-with-microsoft-graph/#idx5">シナリオ 2: ユーザーからライセンスを削除する</a> で記載した内容の、一括処理版です。「PowerShell を用いた一括割り当ての構文」のとおり、<code>Import-Csv &lt;csv ファイルのパス名&gt; | ForEach-Object &#123;&#125;</code> のブラケット内に、単体ユーザーに対する処理を埋め込みします。</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Import-Csv</span> <span class="variable">$path</span> | <span class="built_in">ForEach-Object</span> &#123;</span><br><span class="line">    <span class="built_in">Set-MgUserLicense</span> <span class="literal">-UserId</span> <span class="variable">$_</span>.UserPrincipalName <span class="literal">-AddLicenses</span> <span class="selector-tag">@</span>() <span class="literal">-RemoveLicenses</span> <span class="selector-tag">@</span>(<span class="string">&quot;&lt;削除するライセンスの SkuId&gt;&quot;</span>) &#125;</span><br></pre></td></tr></table></figure><p>ライセンス割り当て方のシナリオは多く考えられ、ここでは全てを取り上げることはできませんが、前回の記事ならびに本記事が Microsoft Graph PowerShell を用いたライセンス割り当てスクリプト作成などの一助となれば幸いです。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの中井です。&lt;/p&gt;
&lt;p&gt;MSOnline および Azure AD PowerShell モジュールにてライセンス割り当て操作が利用できなくなることに伴い、弊サポート チームでは以下ブログにて Microsoft</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="Microsoft Graph" scheme="https://jpazureid.github.io/blog/tags/Microsoft-Graph/"/>
    
  </entry>
  
  <entry>
    <title>Azure AD のエンタイトルメント管理におけるカスタム ワークフローの実行</title>
    <link href="https://jpazureid.github.io/blog/azure-active-directory/run-custom-workflows-in-azure-ad-entitlement-management/"/>
    <id>https://jpazureid.github.io/blog/azure-active-directory/run-custom-workflows-in-azure-ad-entitlement-management/</id>
    <published>2022-03-08T00:00:00.000Z</published>
    <updated>2022-05-21T10:28:09.821Z</updated>
    
    <content type="html"><![CDATA[<p>こんにちは、Azure Identity サポート チームの 竜 です。</p><p>本記事は、2022 年 02 月 24 日に米国の Azure Active Directory Identity Blog で公開された <a href="https://techcommunity.microsoft.com/t5/azure-active-directory-identity/run-custom-workflows-in-azure-ad-entitlement-management/ba-p/2466938">Run custom workflows in Azure AD entitlement management</a> を意訳したものになります。</p><hr><p><a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-logic-apps-integration">Azure Logic Apps を使用したエンタイトルメント管理にカスタム ワーク フロー</a>が導入されたことにより、ユーザーのアクセス管理における複雑なプロセスの自動化が、さらに容易になりました。今回は、この新しい機能を使用して、ユーザーがアクセス パッケージへオンボーディング (利用開始) およびオフボーディング (利用終了) する際のフローをカスタマイズするいくつかのシナリオをご紹介いたします。これらのプロセスを自動化することで、手動の作業によるミスを減らし、また、その他の優先度の高い事業内容に時間をさけるようになります。</p><p>アクセスの付与や削除は、Teams、SharePoint、Groups、アプリなどのリソースへのプロビジョニングだけではありません。電子メールの送信や、データ ベースのレコードの更新など、組織にとって必要となる追加の手順がしばしば発生します。これらの作業は、従来手動で行われていました。例えば、アクセス パッケージの承認者はチームに向けて新しいメンバーの参加を知らせる電子メールを送信したり、アクセス パッケージのメンバーシップの変更やさらに関連する変更を行うために、定期的にスクリプトを実行するなどしていました。</p><p>アクセス パッケージのリクエストが承認されたときや、ユーザーのアクセス期限が切れたときなど、エンタイトルメント管理の特定のイベントを使用してカスタム ワークフローを起動することで、多数の Microsoft のクラウド アプリケーションに加えて、Salesforce や ServiceNow などの外部アプリケーションにまでエンタイトルメント管理を拡張し、これまで手動で行われていたプロセスを自動化することができます。ここでは、架空の会社である Contoso 社が、これらの機能をどのように活用できるかをいくつか見てみましょう。</p><h2 id="エンタイトルメント管理を外部アプリケーションと連携させる"><a href="#エンタイトルメント管理を外部アプリケーションと連携させる" class="headerlink" title="エンタイトルメント管理を外部アプリケーションと連携させる"></a>エンタイトルメント管理を外部アプリケーションと連携させる</h2><p>例えば、Contoso 社では Salesforce を使用して営業チームの案件や機会を管理しています。営業チームは Azure Active Directory (Azure AD) のエンタイトルメント管理でアクセス パッケージを使用し、営業チームのメンバーに関連リソースや SharePoint サイトへのアクセスを付与し、Salesforce にもアクセス可能なようにしてあります。Salesforce へのアクセスの付与に加え、新しいメンバーが Salesforce の特定の案件や連絡先に割り当てられるようにし、またメンバーがチームを離れる際にはその案件や連絡先がチームの他のメンバーに割り当てられるようにしたいと考えています。</p><p><img src="/blog/azure-active-directory/run-custom-workflows-in-azure-ad-entitlement-management/smoorhead_0-1644862613628.png" alt="カスタムの呼び出しを作成し、特定のロジック アプリをカタログに追加することで、ポリシーで定義した特定のアクション (アクセス パッケージの割り当てなど) が生じた際に呼び出すことができます。"></p><p>従来は手作業で行っていた Salesforce のレコード更新を、カスタム ワークフローを設定することで自動化できるようになりました。新しいユーザーが、営業チームのアクセス パッケージへのアクセスを承認されると、自動的にロジック アプリが起動し、そのユーザーを適切な案件や連絡先に割り当てることができます。同様に、ユーザーがアクセス パッケージから削除されると、別のロジック アプリが自動的に起動し、そのメンバーが担当していた Salesforce リソースなどの再割り当てが行われます。これらのプロセスを自動化することで、チームはアクセスの管理ではなく、実際の業務に集中することができるようになります。</p><p><img src="/blog/azure-active-directory/run-custom-workflows-in-azure-ad-entitlement-management/smoorhead_1-1644862613635.png"></p><p><img src="/blog/azure-active-directory/run-custom-workflows-in-azure-ad-entitlement-management/smoorhead_2-1644862613641.png" alt="アクセス パッケージの割り当てに紐づいた「Salesforce を編集するロジック アプリ」により、顧客アカウントの連絡先として、営業担当者が追加されます。"></p><h2 id="ポリシーと連動したカスタム-電子メールの送信"><a href="#ポリシーと連動したカスタム-電子メールの送信" class="headerlink" title="ポリシーと連動したカスタム 電子メールの送信"></a>ポリシーと連動したカスタム 電子メールの送信</h2><p>また、Contoso 社では、ユーザーが営業チームのアクセス パッケージに承認された際に、営業チームに電子メールを送信し、新しいメンバーがチームに参加したことを知らせたいと考えています。Outlook Web for Office 365 を呼び出すシンプルなロジック アプリを作成し、ユーザーが営業チームのアクセス ペッケージの承認を受けたときにこのロジック アプリが起動されることで、このプロセスをシームレスに自動化することができます。</p><p><img src="/blog/azure-active-directory/run-custom-workflows-in-azure-ad-entitlement-management/smoorhead_3-1644862613648.png" alt="ロジック アプリでカスタムメールを作成した例"></p><h2 id="リソースとフィードバック"><a href="#リソースとフィードバック" class="headerlink" title="リソースとフィードバック"></a>リソースとフィードバック</h2><p>これらは、Azure Logic Apps で作成したカスタム ワークフローにアクセス パッケージを紐づけることで、エンタイトルメント管理でさらに多くのユース ケースに対応できるようになったシナリオのほんの一例です。ぜひお試しいただき、ご意見をお聞かせください。</p><p>詳細につきましては、 <a href="https://docs.microsoft.com/ja-jp/azure/active-directory/governance/entitlement-management-logic-apps-integration">ドキュメント</a> や <a href="https://www.youtube.com/watch?v=Yh_Xl617JkM&ab_channel=JefKazimer-CloudIdentity">動画のチュートリアル</a> をご覧ください。<a href="https://feedback.azure.com/d365community">aka.ms/AzureADFeedback</a> へのフィードバックもお待ちしております。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;こんにちは、Azure Identity サポート チームの 竜 です。&lt;/p&gt;
&lt;p&gt;本記事は、2022 年 02 月 24 日に米国の Azure Active Directory Identity Blog で公開された &lt;a href=&quot;https://techco</summary>
      
    
    
    
    
    <category term="Azure AD" scheme="https://jpazureid.github.io/blog/tags/Azure-AD/"/>
    
    <category term="US Identity Blog" scheme="https://jpazureid.github.io/blog/tags/US-Identity-Blog/"/>
    
  </entry>
  
</feed>
